{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/notes/expanded-note-card.tsx"],"sourcesContent":["\"use client\"\n\nimport { Pencil, Trash2, MessageSquare, Circle } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { CATEGORY_STYLES, PRIORITY_STYLES, type Note } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\n\nconst categoryColors = CATEGORY_STYLES\nconst priorityColors = PRIORITY_STYLES\n\ninterface ExpandedNoteCardProps {\n  note: Note\n  onEdit: (note: Note) => void\n  onDelete: (id: string) => void\n}\n\nexport function ExpandedNoteCard({ note, onEdit, onDelete }: ExpandedNoteCardProps) {\n  const colors = categoryColors[note.category] || categoryColors.OTHER\n  const priorityColor = priorityColors[note.priority]\n\n  return (\n    <div className=\"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-3 pb-3 border-b border-gray-100\">\n        <div className=\"flex items-center gap-3\">\n          <span className={cn(\"px-3 py-1 text-xs font-semibold rounded-full\", colors.bg, colors.text)}>\n            {note.category.replace(/_/g, \" \")}\n          </span>\n          <div className=\"flex items-center gap-1\">\n            <Circle className={cn(\"w-3 h-3 fill-current\", priorityColor)} />\n            <span className=\"text-xs text-gray-500 capitalize\">{note.priority}</span>\n          </div>\n        </div>\n        <span className=\"text-xs text-gray-400 flex items-center gap-1\">\n          <MessageSquare className=\"w-3 h-3\" />\n          {note.timestamp}\n        </span>\n      </div>\n\n      {/* Content */}\n      <div className=\"space-y-3 mb-4\">\n        <div>\n          <h4 className=\"text-xs font-medium text-gray-500 mb-1\">Content:</h4>\n          <p className=\"text-sm text-gray-800 leading-relaxed\">{note.content}</p>\n        </div>\n\n        {note.relatedTo && (\n          <div>\n            <h4 className=\"text-xs font-medium text-gray-500 mb-1\">Related To:</h4>\n            <p className=\"text-sm text-gray-700\">{note.relatedTo}</p>\n          </div>\n        )}\n\n        {note.action && (\n          <div>\n            <h4 className=\"text-xs font-medium text-gray-500 mb-1\">Action:</h4>\n            <p className=\"text-sm text-gray-700\">{note.action}</p>\n          </div>\n        )}\n\n        <div>\n          <h4 className=\"text-xs font-medium text-gray-500 mb-1\">Source:</h4>\n          <p className=\"text-sm text-gray-700\">{note.source}</p>\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex gap-2 pt-3 border-t border-gray-100\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => onEdit(note)}\n          className=\"text-gray-600 hover:text-blue-600 gap-1\"\n        >\n          <Pencil className=\"w-4 h-4\" />\n          Edit\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => onDelete(note.id)}\n          className=\"text-gray-600 hover:text-red-600 gap-1\"\n        >\n          <Trash2 className=\"w-4 h-4\" />\n          Delete\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,iBAAiB,kIAAe;AACtC,MAAM,iBAAiB,kIAAe;AAQ/B,SAAS,iBAAiB,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAyB;IAChF,MAAM,SAAS,cAAc,CAAC,KAAK,QAAQ,CAAC,IAAI,eAAe,KAAK;IACpE,MAAM,gBAAgB,cAAc,CAAC,KAAK,QAAQ,CAAC;IAEnD,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAW,IAAA,qHAAE,EAAC,gDAAgD,OAAO,EAAE,EAAE,OAAO,IAAI;0CACvF,KAAK,QAAQ,CAAC,OAAO,CAAC,MAAM;;;;;;0CAE/B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,mNAAM;wCAAC,WAAW,IAAA,qHAAE,EAAC,wBAAwB;;;;;;kDAC9C,6LAAC;wCAAK,WAAU;kDAAoC,KAAK,QAAQ;;;;;;;;;;;;;;;;;;kCAGrE,6LAAC;wBAAK,WAAU;;0CACd,6LAAC,4OAAa;gCAAC,WAAU;;;;;;4BACxB,KAAK,SAAS;;;;;;;;;;;;;0BAKnB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,6LAAC;gCAAE,WAAU;0CAAyC,KAAK,OAAO;;;;;;;;;;;;oBAGnE,KAAK,SAAS,kBACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,6LAAC;gCAAE,WAAU;0CAAyB,KAAK,SAAS;;;;;;;;;;;;oBAIvD,KAAK,MAAM,kBACV,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,6LAAC;gCAAE,WAAU;0CAAyB,KAAK,MAAM;;;;;;;;;;;;kCAIrD,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,6LAAC;gCAAE,WAAU;0CAAyB,KAAK,MAAM;;;;;;;;;;;;;;;;;;0BAKrD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,wIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,OAAO;wBACtB,WAAU;;0CAEV,6LAAC,mNAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGhC,6LAAC,wIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,SAAS,KAAK,EAAE;wBAC/B,WAAU;;0CAEV,6LAAC,uNAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;;;;;;;AAMxC;KAzEgB"}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/notes/note-editor-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { X } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport type { Note, NoteCategory } from \"@/lib/types\"\nimport { CATEGORY_STYLES } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\n\nconst categoryColors = CATEGORY_STYLES\n\ninterface NoteEditorModalProps {\n  note: Note | null\n  isOpen: boolean\n  onClose: () => void\n  onSave: (note: Note) => void\n  isNew?: boolean\n}\n\nconst categories = [\n  \"HEADER_INFO\",\n  \"PURPOSE_SCOPE\",\n  \"ROLES_RESPONSIBILITIES\",\n  \"PROCEDURE_STEPS\",\n  \"QUALITY_SUCCESS\",\n  \"TROUBLESHOOTING\",\n  \"OTHER\",\n]\n\nconst priorities = [\"high\", \"medium\", \"low\"] as const\n\nexport function NoteEditorModal({ note, isOpen, onClose, onSave, isNew }: NoteEditorModalProps) {\n  const [editedNote, setEditedNote] = useState<Note | null>(null)\n\n  useEffect(() => {\n    if (note) {\n      setEditedNote({ ...note })\n    } else if (isNew) {\n      setEditedNote({\n        id: `note-${Date.now()}`,\n        category: \"OTHER\",\n        priority: \"medium\",\n        timestamp: \"Manual Entry\",\n        source: \"Manual\",\n        content: \"\",\n        relatedTo: \"\",\n        action: \"\",\n      })\n    }\n  }, [note, isNew])\n\n  if (!isOpen || !editedNote) return null\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (editedNote.content.trim()) {\n      onSave(editedNote)\n      onClose()\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl\">\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">{isNew ? \"Add New Note\" : \"Edit Note\"}</h2>\n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose} className=\"h-8 w-8 p-0\">\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          {/* Category */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Category</label>\n            <div className=\"flex flex-wrap gap-2\">\n              {categories.map((cat) => {\n                const colors = categoryColors[cat as NoteCategory] || categoryColors.OTHER\n                return (\n                  <button\n                    key={cat}\n                    type=\"button\"\n                    onClick={() => setEditedNote({ ...editedNote, category: cat as NoteCategory })}\n                    className={cn(\n                      \"px-3 py-1.5 text-xs font-medium rounded-full transition-all\",\n                      editedNote.category === cat\n                        ? `${colors.bg} ${colors.text} ring-2 ring-offset-1 ring-blue-500`\n                        : \"bg-gray-100 text-gray-600 hover:bg-gray-200\",\n                    )}\n                  >\n                    {cat.replace(/_/g, \" \")}\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Priority */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Priority</label>\n            <div className=\"flex gap-2\">\n              {priorities.map((p) => (\n                <button\n                  key={p}\n                  type=\"button\"\n                  onClick={() => setEditedNote({ ...editedNote, priority: p })}\n                  className={cn(\n                    \"px-4 py-2 text-sm font-medium rounded-lg capitalize transition-all\",\n                    editedNote.priority === p\n                      ? p === \"high\"\n                        ? \"bg-red-100 text-red-700 ring-2 ring-red-500\"\n                        : p === \"medium\"\n                          ? \"bg-yellow-100 text-yellow-700 ring-2 ring-yellow-500\"\n                          : \"bg-green-100 text-green-700 ring-2 ring-green-500\"\n                      : \"bg-gray-100 text-gray-600 hover:bg-gray-200\",\n                  )}\n                >\n                  {p}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Content */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content</label>\n            <textarea\n              value={editedNote.content}\n              onChange={(e) => setEditedNote({ ...editedNote, content: e.target.value })}\n              placeholder=\"Describe the note content...\"\n              className=\"w-full h-32 p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n              required\n            />\n          </div>\n\n          {/* Related To */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Related To</label>\n            <input\n              type=\"text\"\n              value={editedNote.relatedTo}\n              onChange={(e) => setEditedNote({ ...editedNote, relatedTo: e.target.value })}\n              placeholder=\"e.g., Step 3 - Approval Process\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n\n          {/* Action */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Action Required</label>\n            <input\n              type=\"text\"\n              value={editedNote.action}\n              onChange={(e) => setEditedNote({ ...editedNote, action: e.target.value })}\n              placeholder=\"e.g., Add approval step with 24hr SLA\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-3 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} className=\"flex-1 bg-transparent\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white\">\n              {isNew ? \"Add Note\" : \"Save Changes\"}\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 684, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/app/review/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter, useParams } from \"next/navigation\"\nimport { ArrowLeft, ArrowRight, Plus, Search, AlertTriangle } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { ExpandedNoteCard } from \"@/components/notes/expanded-note-card\"\nimport { NoteEditorModal } from \"@/components/notes/note-editor-modal\"\nimport { useSOPContext } from \"@/lib/sop-context\"\nimport { CATEGORY_STYLES, type Note, type NoteCategory } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\n\nconst categoryColors = CATEGORY_STYLES\n\nconst categories = [\n  \"All\",\n  \"HEADER_INFO\",\n  \"PURPOSE_SCOPE\",\n  \"ROLES_RESPONSIBILITIES\",\n  \"PROCEDURE_STEPS\",\n  \"QUALITY_SUCCESS\",\n  \"TROUBLESHOOTING\",\n]\nconst sortOptions = [\"Chronological\", \"By Section\", \"By Priority\"]\n\nconst missingCritical = [\n  \"No troubleshooting steps defined\",\n  \"Quality metrics not specified\",\n  \"Visual aids not discussed\",\n]\n\nexport default function ReviewNotesPage() {\n  const router = useRouter()\n  const params = useParams()\n  const { sops, updateSOP } = useSOPContext()\n\n  const sop = sops.find((s) => s.id === params.id) || sops[0]\n  const [notes, setNotes] = useState<Note[]>(sop?.notes || [])\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [activeFilter, setActiveFilter] = useState(\"All\")\n  const [sortBy, setSortBy] = useState(\"Chronological\")\n  const [editingNote, setEditingNote] = useState<Note | null>(null)\n  const [isAddingNote, setIsAddingNote] = useState(false)\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<string | null>(null)\n\n  const filteredNotes = useMemo(() => {\n    let result = [...notes]\n\n    // Filter by category\n    if (activeFilter !== \"All\") {\n      result = result.filter((n) => n.category === activeFilter)\n    }\n\n    // Filter by search\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase()\n      result = result.filter(\n        (n) =>\n          n.content.toLowerCase().includes(query) ||\n          n.relatedTo.toLowerCase().includes(query) ||\n          n.action.toLowerCase().includes(query),\n      )\n    }\n\n    // Sort\n    if (sortBy === \"By Priority\") {\n      const priorityOrder = { high: 0, medium: 1, low: 2 }\n      result.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority])\n    } else if (sortBy === \"By Section\") {\n      result.sort((a, b) => a.category.localeCompare(b.category))\n    }\n\n    return result\n  }, [notes, activeFilter, searchQuery, sortBy])\n\n  const categoryCounts = useMemo(() => {\n    const counts: Record<string, number> = { All: notes.length }\n    notes.forEach((n) => {\n      counts[n.category] = (counts[n.category] || 0) + 1\n    })\n    return counts\n  }, [notes])\n\n  const handleSaveNote = (note: Note) => {\n    if (notes.find((n) => n.id === note.id)) {\n      setNotes(notes.map((n) => (n.id === note.id ? note : n)))\n    } else {\n      setNotes([...notes, note])\n    }\n    setEditingNote(null)\n    setIsAddingNote(false)\n  }\n\n  const handleDeleteNote = (id: string) => {\n    setNotes(notes.filter((n) => n.id !== id))\n    setShowDeleteConfirm(null)\n  }\n\n  const handleGenerate = () => {\n    if (sop) {\n      updateSOP(sop.id, { notes })\n    }\n    router.push(`/preview/${params.id}`)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n        <Link href=\"/create\" className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\">\n          <ArrowLeft className=\"w-5 h-5\" />\n          <span className=\"hidden sm:inline\">Back to Chat</span>\n        </Link>\n        <h1 className=\"text-lg font-semibold text-gray-900\">Review & Edit Notes</h1>\n        <Button onClick={handleGenerate} className=\"bg-blue-600 hover:bg-blue-700 text-white gap-2\">\n          Generate SOP\n          <ArrowRight className=\"w-4 h-4\" />\n        </Button>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto px-4 py-6\">\n        {/* Title & Count */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-1\">All Conversation Notes ({notes.length} total)</h2>\n          <p className=\"text-gray-600\">Review and edit notes before generating your SOP</p>\n        </div>\n\n        {/* Filters & Search */}\n        <div className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Category Filters */}\n            <div className=\"flex flex-wrap gap-2 flex-1\">\n              {categories.map((cat) => {\n                const count = categoryCounts[cat] || 0\n                const colors = cat === \"All\" ? { bg: \"bg-gray-100\", text: \"text-gray-700\" } : (categoryColors[cat as NoteCategory] || categoryColors.OTHER)\n                return (\n                  <button\n                    key={cat}\n                    onClick={() => setActiveFilter(cat)}\n                    className={cn(\n                      \"px-3 py-1.5 text-xs font-medium rounded-full transition-all flex items-center gap-1\",\n                      activeFilter === cat\n                        ? `${colors?.bg} ${colors?.text} ring-2 ring-blue-500`\n                        : \"bg-gray-100 text-gray-600 hover:bg-gray-200\",\n                    )}\n                  >\n                    {cat === \"All\" ? \"All\" : cat.replace(/_/g, \" \")}\n                    <span className=\"bg-white/50 px-1.5 rounded-full text-xs\">{count}</span>\n                  </button>\n                )\n              })}\n            </div>\n\n            {/* Sort */}\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {sortOptions.map((opt) => (\n                <option key={opt} value={opt}>\n                  Sort: {opt}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Search */}\n          <div className=\"relative mt-4\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search notes...\"\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n\n        {/* Notes List */}\n        <div className=\"space-y-4 mb-6\">\n          {filteredNotes.length > 0 ? (\n            filteredNotes.map((note) => (\n              <ExpandedNoteCard\n                key={note.id}\n                note={note}\n                onEdit={setEditingNote}\n                onDelete={(id) => setShowDeleteConfirm(id)}\n              />\n            ))\n          ) : (\n            <div className=\"text-center py-12 bg-white border border-gray-200 rounded-xl\">\n              <p className=\"text-gray-500\">No notes match your filters</p>\n            </div>\n          )}\n        </div>\n\n        {/* Add Manual Note */}\n        <Button\n          variant=\"outline\"\n          onClick={() => setIsAddingNote(true)}\n          className=\"w-full border-dashed border-gray-300 text-gray-600 hover:border-blue-500 hover:text-blue-600 mb-6 bg-transparent\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add Manual Note\n        </Button>\n\n        {/* Missing Critical Info Warning */}\n        {missingCritical.length > 0 && (\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-5 mb-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertTriangle className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-yellow-800 mb-2\">Missing Critical Information</h3>\n                <p className=\"text-sm text-yellow-700 mb-3\">The following sections need attention:</p>\n                <ul className=\"space-y-1\">\n                  {missingCritical.map((item, index) => (\n                    <li key={index} className=\"text-sm text-yellow-700 flex items-center gap-2\">\n                      <span className=\"w-1.5 h-1.5 bg-yellow-600 rounded-full\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n                <div className=\"flex gap-3 mt-4\">\n                  <Link href=\"/create\">\n                    <Button\n                      variant=\"outline\"\n                      className=\"text-yellow-700 border-yellow-300 hover:bg-yellow-100 bg-transparent\"\n                    >\n                      Back to Chat to Address\n                    </Button>\n                  </Link>\n                  <Button onClick={handleGenerate} className=\"bg-yellow-600 hover:bg-yellow-700 text-white\">\n                    Generate Anyway\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Generate CTA */}\n        <div className=\"flex justify-end\">\n          <Button onClick={handleGenerate} size=\"lg\" className=\"bg-blue-600 hover:bg-blue-700 text-white gap-2 px-8\">\n            Generate Complete SOP\n            <ArrowRight className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      </main>\n\n      {/* Note Editor Modal */}\n      <NoteEditorModal\n        note={editingNote}\n        isOpen={!!editingNote || isAddingNote}\n        onClose={() => {\n          setEditingNote(null)\n          setIsAddingNote(false)\n        }}\n        onSave={handleSaveNote}\n        isNew={isAddingNote}\n      />\n\n      {/* Delete Confirmation */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl p-6 max-w-sm w-full shadow-2xl\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Delete Note?</h3>\n            <p className=\"text-gray-600 mb-6\">Are you sure? This cannot be undone.</p>\n            <div className=\"flex gap-3\">\n              <Button variant=\"outline\" onClick={() => setShowDeleteConfirm(null)} className=\"flex-1 bg-transparent\">\n                Cancel\n              </Button>\n              <Button\n                onClick={() => handleDeleteNote(showDeleteConfirm)}\n                className=\"flex-1 bg-red-600 hover:bg-red-700 text-white\"\n              >\n                Delete\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}