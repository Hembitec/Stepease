{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,6LAAC,qLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,6LAAC,yLAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,uLAA0B;;;;;;;;;;;AAGjC;KArBS;AAuBT,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,6LAAC,oMAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gMAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/chat/phase-indicator.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - PHASE INDICATOR\n// Visual progress indicator for the 5-phase conversation flow\n// =============================================================================\n\nimport { CheckCircle2, Circle, Loader2 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { CONVERSATION_PHASES, type ConversationPhase } from \"@/lib/types\"\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\ninterface PhaseIndicatorProps {\n    currentPhase: ConversationPhase\n    progress: number // 0-100 overall progress\n    className?: string\n    variant?: \"compact\" | \"detailed\"\n}\n\n// -----------------------------------------------------------------------------\n// Phase Configuration\n// -----------------------------------------------------------------------------\n\nconst PHASE_ORDER: ConversationPhase[] = [\n    \"foundation\",\n    \"process\",\n    \"accountability\",\n    \"quality\",\n    \"finalization\",\n]\n\n// -----------------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------------\n\nexport function PhaseIndicator({\n    currentPhase,\n    progress,\n    className,\n    variant = \"compact\",\n}: PhaseIndicatorProps) {\n    const currentIndex = PHASE_ORDER.indexOf(currentPhase)\n\n    if (variant === \"compact\") {\n        return (\n            <div className={cn(\"flex items-center gap-2\", className)}>\n                {/* Phase Pills */}\n                <div className=\"flex items-center gap-1\">\n                    {PHASE_ORDER.map((phase, index) => {\n                        const isComplete = index < currentIndex\n                        const isCurrent = index === currentIndex\n                        const isPending = index > currentIndex\n\n                        return (\n                            <div\n                                key={phase}\n                                className={cn(\n                                    \"h-2 rounded-full transition-all duration-300\",\n                                    index === 0 ? \"w-8\" : \"w-6\",\n                                    isComplete && \"bg-emerald-500\",\n                                    isCurrent && \"bg-blue-600\",\n                                    isPending && \"bg-slate-200\"\n                                )}\n                                title={CONVERSATION_PHASES[phase].name}\n                            />\n                        )\n                    })}\n                </div>\n\n                {/* Current Phase Label */}\n                <span className=\"text-xs font-medium text-slate-600\">\n                    {CONVERSATION_PHASES[currentPhase].name}\n                </span>\n\n                {/* Progress Percentage */}\n                <span className=\"text-xs text-slate-400\">\n                    {Math.round(progress)}%\n                </span>\n            </div>\n        )\n    }\n\n    // Detailed variant\n    return (\n        <div className={cn(\"space-y-4\", className)}>\n            {/* Overall Progress Bar */}\n            <div className=\"space-y-1\">\n                <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"font-medium text-slate-900\">\n                        {CONVERSATION_PHASES[currentPhase].name}\n                    </span>\n                    <span className=\"text-slate-500\">{Math.round(progress)}% complete</span>\n                </div>\n                <div className=\"h-2 bg-slate-100 rounded-full overflow-hidden\">\n                    <div\n                        className=\"h-full bg-blue-600 rounded-full transition-all duration-500 ease-out\"\n                        style={{ width: `${progress}%` }}\n                    />\n                </div>\n            </div>\n\n            {/* Phase Steps */}\n            <div className=\"space-y-2\">\n                {PHASE_ORDER.map((phase, index) => {\n                    const phaseInfo = CONVERSATION_PHASES[phase]\n                    const isComplete = index < currentIndex\n                    const isCurrent = index === currentIndex\n                    const isPending = index > currentIndex\n\n                    return (\n                        <div\n                            key={phase}\n                            className={cn(\n                                \"flex items-center gap-3 p-2 rounded-lg transition-colors\",\n                                isCurrent && \"bg-blue-50\",\n                                isComplete && \"bg-emerald-50/50\"\n                            )}\n                        >\n                            {/* Icon */}\n                            <div\n                                className={cn(\n                                    \"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0\",\n                                    isComplete && \"bg-emerald-500 text-white\",\n                                    isCurrent && \"bg-blue-600 text-white\",\n                                    isPending && \"bg-slate-200 text-slate-400\"\n                                )}\n                            >\n                                {isComplete ? (\n                                    <CheckCircle2 className=\"w-4 h-4\" />\n                                ) : isCurrent ? (\n                                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                                ) : (\n                                    <Circle className=\"w-3 h-3\" />\n                                )}\n                            </div>\n\n                            {/* Text */}\n                            <div className=\"flex-1 min-w-0\">\n                                <div\n                                    className={cn(\n                                        \"text-sm font-medium truncate\",\n                                        isComplete && \"text-emerald-700\",\n                                        isCurrent && \"text-blue-700\",\n                                        isPending && \"text-slate-400\"\n                                    )}\n                                >\n                                    {phaseInfo.name}\n                                </div>\n                                <div\n                                    className={cn(\n                                        \"text-xs truncate\",\n                                        isComplete && \"text-emerald-600/70\",\n                                        isCurrent && \"text-blue-600/70\",\n                                        isPending && \"text-slate-400\"\n                                    )}\n                                >\n                                    {phaseInfo.description}\n                                </div>\n                            </div>\n\n                            {/* Status */}\n                            {isComplete && (\n                                <span className=\"text-xs font-medium text-emerald-600\">Done</span>\n                            )}\n                            {isCurrent && (\n                                <span className=\"text-xs font-medium text-blue-600\">In Progress</span>\n                            )}\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )\n}\n\n// -----------------------------------------------------------------------------\n// Mini Phase Badge (for header)\n// -----------------------------------------------------------------------------\n\ninterface PhaseBadgeProps {\n    phase: ConversationPhase\n    progress: number\n    className?: string\n}\n\nexport function PhaseBadge({ phase, progress, className }: PhaseBadgeProps) {\n    return (\n        <div\n            className={cn(\n                \"inline-flex items-center gap-2 px-3 py-1.5 rounded-full\",\n                \"bg-blue-50 border border-blue-200\",\n                className\n            )}\n        >\n            <div className=\"w-2 h-2 rounded-full bg-blue-600 animate-pulse\" />\n            <span className=\"text-xs font-medium text-blue-700\">\n                {CONVERSATION_PHASES[phase].name}\n            </span>\n            <span className=\"text-xs text-blue-500\">{Math.round(progress)}%</span>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/notes/notes-panel.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - ENHANCED NOTES PANEL\n// Displays categorized notes with priority indicators\n// =============================================================================\n\nimport { useState, useMemo } from \"react\"\nimport { FileEdit, Trash2, ChevronDown, ChevronRight, Sparkles } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { cn } from \"@/lib/utils\"\nimport {\n  type Note,\n  type NoteCategory,\n  CATEGORY_STYLES,\n  PRIORITY_STYLES,\n  NOTE_CATEGORIES,\n} from \"@/lib/types\"\nimport { PhaseIndicator } from \"@/components/chat/phase-indicator\"\nimport type { ConversationPhase } from \"@/lib/types\"\nimport type { AnalysisResult } from \"@/lib/sop-analyzer\"\nimport type { ImprovementStatus } from \"@/lib/improvement-helpers\"\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\ninterface NotesPanelProps {\n  notes: Note[]\n  onDeleteNote?: (id: string) => void\n  onEditNote?: (note: Note) => void\n  onReview?: () => void\n  progress: number\n  phase: ConversationPhase | string\n  // Improvement mode props\n  isImprovementMode?: boolean\n  analysisResult?: AnalysisResult\n  improvementStatus?: Record<string, ImprovementStatus>\n}\n\n// -----------------------------------------------------------------------------\n// Note Card Component\n// -----------------------------------------------------------------------------\n\nfunction NoteCard({\n  note,\n  onDelete,\n  onEdit,\n}: {\n  note: Note\n  onDelete?: () => void\n  onEdit?: () => void\n}) {\n  const categoryStyle = CATEGORY_STYLES[note.category] || CATEGORY_STYLES.METADATA\n  const priorityStyle = PRIORITY_STYLES[note.priority]\n\n  return (\n    <div className=\"bg-white rounded-lg border border-slate-200 p-3 hover:shadow-sm transition-shadow\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-2 mb-2\">\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <span\n            className={cn(\n              \"px-2 py-0.5 rounded text-xs font-medium\",\n              categoryStyle.bg,\n              categoryStyle.text\n            )}\n          >\n            {categoryStyle.label}\n          </span>\n          <span className={cn(\"text-sm font-bold\", priorityStyle.color)}>\n            {priorityStyle.icon}\n          </span>\n        </div>\n        <span className=\"text-xs text-slate-400 whitespace-nowrap\">\n          {note.timestamp}\n        </span>\n      </div>\n\n      {/* Content */}\n      <p className=\"text-sm text-slate-700 mb-2 line-clamp-3\">{note.content}</p>\n\n      {/* Related To */}\n      {note.relatedTo && (\n        <p className=\"text-xs text-slate-500 mb-2\">\n          <span className=\"font-medium\">â†’</span> {note.relatedTo}\n        </p>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex items-center justify-between pt-2 border-t border-slate-100\">\n        <span className=\"text-xs text-slate-400\">{note.source}</span>\n        <div className=\"flex items-center gap-1\">\n          {onEdit && (\n            <button\n              onClick={onEdit}\n              className=\"p-1 text-slate-400 hover:text-slate-600 transition-colors\"\n              title=\"Edit note\"\n            >\n              <FileEdit className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n          {onDelete && (\n            <button\n              onClick={onDelete}\n              className=\"p-1 text-slate-400 hover:text-red-500 transition-colors\"\n              title=\"Delete note\"\n            >\n              <Trash2 className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Category Group Component\n// -----------------------------------------------------------------------------\n\nfunction CategoryGroup({\n  category,\n  notes,\n  onDeleteNote,\n  onEditNote,\n  defaultExpanded = true,\n}: {\n  category: NoteCategory\n  notes: Note[]\n  onDeleteNote?: (id: string) => void\n  onEditNote?: (note: Note) => void\n  defaultExpanded?: boolean\n}) {\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded)\n  const categoryStyle = CATEGORY_STYLES[category]\n\n  return (\n    <div className=\"space-y-2\">\n      {/* Category Header */}\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        className=\"w-full flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 transition-colors\"\n      >\n        <div className=\"flex items-center gap-2\">\n          {isExpanded ? (\n            <ChevronDown className=\"w-4 h-4 text-slate-400\" />\n          ) : (\n            <ChevronRight className=\"w-4 h-4 text-slate-400\" />\n          )}\n          <span\n            className={cn(\n              \"px-2 py-0.5 rounded text-xs font-medium\",\n              categoryStyle.bg,\n              categoryStyle.text\n            )}\n          >\n            {categoryStyle.label}\n          </span>\n        </div>\n        <span className=\"text-xs text-slate-400\">{notes.length}</span>\n      </button>\n\n      {/* Notes */}\n      {isExpanded && (\n        <div className=\"space-y-2 pl-6\">\n          {notes.map((note) => (\n            <NoteCard\n              key={note.id}\n              note={note}\n              onDelete={onDeleteNote ? () => onDeleteNote(note.id) : undefined}\n              onEdit={onEditNote ? () => onEditNote(note) : undefined}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Analysis Summary Component (for Improvement Mode)\n// -----------------------------------------------------------------------------\n\nfunction AnalysisSummary({\n  analysisResult,\n  improvementStatus,\n}: {\n  analysisResult: AnalysisResult\n  improvementStatus: Record<string, ImprovementStatus>\n}) {\n  const totalImprovements = analysisResult.improvements.length\n  const addressedCount = Object.values(improvementStatus).filter(s => s === 'addressed').length\n  const progressPercent = totalImprovements > 0\n    ? Math.round((addressedCount / totalImprovements) * 100)\n    : 0\n\n  const highPriority = analysisResult.improvements.filter(i => i.priority === 'High')\n  const mediumPriority = analysisResult.improvements.filter(i => i.priority === 'Medium')\n  const lowPriority = analysisResult.improvements.filter(i => i.priority === 'Low')\n\n  const getStatusIcon = (idx: number) => {\n    const status = improvementStatus[`improvement-${idx}`]\n    return status === 'addressed' ? 'âœ…' : 'â³'\n  }\n\n  const getImprovementIndex = (improvement: AnalysisResult['improvements'][0]) => {\n    return analysisResult.improvements.indexOf(improvement)\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg p-4 border border-slate-200\">\n      <h4 className=\"font-semibold text-slate-800 mb-3 flex items-center gap-2\">\n        ðŸ“Š Analysis Summary\n      </h4>\n\n      {/* Score and Progress */}\n      <div className=\"flex gap-3 text-sm mb-3\">\n        <span className=\"px-2 py-1 bg-blue-100 text-blue-700 rounded font-medium\">\n          Quality: {analysisResult.quality.overall}/100\n        </span>\n        <span className=\"px-2 py-1 bg-green-100 text-green-700 rounded font-medium\">\n          Progress: {addressedCount}/{totalImprovements}\n        </span>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"w-full bg-slate-200 rounded-full h-2 mb-4\">\n        <div\n          className=\"bg-green-500 h-2 rounded-full transition-all duration-500\"\n          style={{ width: `${progressPercent}%` }}\n        />\n      </div>\n\n      {/* Priority Sections */}\n      <div className=\"space-y-3\">\n        {highPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-red-600 flex items-center gap-1\">\n              ðŸ”´ HIGH PRIORITY ({highPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {highPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {mediumPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-yellow-600 flex items-center gap-1\">\n              ðŸŸ¡ MEDIUM PRIORITY ({mediumPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {mediumPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {lowPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-blue-600 flex items-center gap-1\">\n              ðŸ”µ LOW PRIORITY ({lowPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {lowPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Main Notes Panel\n// -----------------------------------------------------------------------------\n\nexport function NotesPanel({\n  notes,\n  onDeleteNote,\n  onEditNote,\n  onReview,\n  progress,\n  phase,\n  isImprovementMode = false,\n  analysisResult,\n  improvementStatus = {},\n}: NotesPanelProps) {\n  const [viewMode, setViewMode] = useState<\"grouped\" | \"list\">(\"grouped\")\n\n  // Group notes by category\n  const groupedNotes = useMemo(() => {\n    const groups: Partial<Record<NoteCategory, Note[]>> = {}\n\n    for (const note of notes) {\n      if (!groups[note.category]) {\n        groups[note.category] = []\n      }\n      groups[note.category]!.push(note)\n    }\n\n    return groups\n  }, [notes])\n\n  // Order categories by priority (procedure steps first, etc.)\n  const categoryOrder: NoteCategory[] = [\n    \"HEADER_INFO\",\n    \"PURPOSE_SCOPE\",\n    \"ROLES_RESPONSIBILITIES\",\n    \"PROCEDURE_STEPS\",\n    \"DECISION_POINTS\",\n    \"QUALITY_SUCCESS\",\n    \"TROUBLESHOOTING\",\n    \"MATERIALS_RESOURCES\",\n    \"DEFINITIONS_REFERENCES\",\n    \"VISUAL_AIDS\",\n    \"GAPS_IMPROVEMENTS\",\n    \"METADATA\",\n  ]\n\n  const sortedCategories = categoryOrder.filter(\n    (cat) => groupedNotes[cat] && groupedNotes[cat]!.length > 0\n  )\n\n  // Convert phase string to ConversationPhase type\n  const normalizedPhase = (phase as ConversationPhase) || \"foundation\"\n\n  return (\n    <div className=\"h-full flex flex-col bg-slate-50\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-slate-200 bg-white\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"font-semibold text-slate-900\">Extracted Notes</h3>\n          <span className=\"text-sm text-slate-500\">{notes.length} notes</span>\n        </div>\n\n        {/* Phase Progress */}\n        <PhaseIndicator\n          currentPhase={normalizedPhase}\n          progress={progress}\n          variant=\"compact\"\n        />\n      </div>\n\n      {/* Analysis Summary - Only show in improvement mode */}\n      {isImprovementMode && analysisResult && (\n        <div className=\"p-4 border-b border-slate-200\">\n          <AnalysisSummary\n            analysisResult={analysisResult}\n            improvementStatus={improvementStatus}\n          />\n        </div>\n      )}\n\n      {/* Notes Content */}\n      <ScrollArea className=\"flex-1 p-4\">\n        {notes.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <FileEdit className=\"w-6 h-6 text-slate-400\" />\n            </div>\n            <p className=\"text-sm text-slate-500 mb-1\">No notes yet</p>\n            <p className=\"text-xs text-slate-400\">\n              Notes will appear here as you chat with the AI\n            </p>\n          </div>\n        ) : viewMode === \"grouped\" ? (\n          <div className=\"space-y-4\">\n            {sortedCategories.map((category) => (\n              <CategoryGroup\n                key={category}\n                category={category}\n                notes={groupedNotes[category]!}\n                onDeleteNote={onDeleteNote}\n                onEditNote={onEditNote}\n                defaultExpanded={true}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {notes.map((note) => (\n              <NoteCard\n                key={note.id}\n                note={note}\n                onDelete={onDeleteNote ? () => onDeleteNote(note.id) : undefined}\n                onEdit={onEditNote ? () => onEditNote(note) : undefined}\n              />\n            ))}\n          </div>\n        )}\n      </ScrollArea>\n\n      {/* Footer Actions */}\n      <div className=\"p-4 border-t border-slate-200 bg-white\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <button\n            onClick={() => setViewMode(\"grouped\")}\n            className={cn(\n              \"flex-1 py-1.5 text-xs font-medium rounded transition-colors\",\n              viewMode === \"grouped\"\n                ? \"bg-blue-100 text-blue-700\"\n                : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n            )}\n          >\n            By Category\n          </button>\n          <button\n            onClick={() => setViewMode(\"list\")}\n            className={cn(\n              \"flex-1 py-1.5 text-xs font-medium rounded transition-colors\",\n              viewMode === \"list\"\n                ? \"bg-blue-100 text-blue-700\"\n                : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n            )}\n          >\n            All Notes\n          </button>\n        </div>\n\n        <Button\n          onClick={onReview}\n          disabled={notes.length === 0}\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white gap-2\"\n        >\n          <Sparkles className=\"w-4 h-4\" />\n          Review & Generate SOP\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1220, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,6LAAC,iLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 1283, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/layout/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport {\n  LayoutDashboard,\n  FolderOpen,\n  Settings,\n  FileText,\n  LogOut,\n  Plus,\n  ChevronRight,\n  ChevronLeft,\n  X,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\n\nconst menuItems = [\n  { icon: LayoutDashboard, label: \"Dashboard\", href: \"/dashboard\" },\n  { icon: FolderOpen, label: \"Library\", href: \"/library\" },\n  { icon: Settings, label: \"Settings\", href: \"/settings\" },\n]\n\ninterface SidebarProps {\n  isCollapsed: boolean\n  onToggle: () => void\n  isMobileOpen?: boolean\n  onMobileClose?: () => void\n}\n\nexport function Sidebar({ isCollapsed, onToggle, isMobileOpen, onMobileClose }: SidebarProps) {\n  const pathname = usePathname()\n\n  return (\n    <>\n      {/* Mobile Backdrop */}\n      {isMobileOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 md:hidden\"\n          onClick={onMobileClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <aside\n        className={cn(\n          \"fixed left-0 top-0 h-full bg-slate-900 text-slate-300 flex flex-col z-50 transition-all duration-300 ease-in-out\",\n          // Desktop: collapsed or expanded\n          \"hidden md:flex\",\n          isCollapsed ? \"md:w-20\" : \"md:w-64\",\n          // Mobile: overlay mode\n          isMobileOpen && \"!flex w-72\"\n        )}\n      >\n        {/* Header Row: Logo + Name + Toggle */}\n        <div\n          className={cn(\n            \"flex items-center gap-3 py-5 border-b border-slate-800\",\n            isCollapsed && !isMobileOpen ? \"px-4 justify-center\" : \"px-5\"\n          )}\n        >\n          {/* Logo */}\n          <div className=\"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/25 flex-shrink-0\">\n            <FileText className=\"w-5 h-5 text-white\" />\n          </div>\n\n          {/* Name - hidden when collapsed on desktop, always shown on mobile */}\n          {(!isCollapsed || isMobileOpen) && (\n            <span className=\"text-lg font-bold text-white whitespace-nowrap flex-1\">\n              StepWise\n            </span>\n          )}\n\n          {/* Toggle Button (desktop) / Close Button (mobile) */}\n          {isMobileOpen ? (\n            <button\n              onClick={onMobileClose}\n              className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n              title=\"Close sidebar\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          ) : (\n            <button\n              onClick={onToggle}\n              className={cn(\n                \"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\",\n                isCollapsed && \"hidden\"\n              )}\n              title={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n            >\n              <ChevronLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n        </div>\n\n        {/* Expand button when collapsed (desktop only) */}\n        {isCollapsed && !isMobileOpen && (\n          <div className=\"px-3 py-3 border-b border-slate-800\">\n            <button\n              onClick={onToggle}\n              className=\"w-full h-10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n              title=\"Expand sidebar\"\n            >\n              <ChevronRight className=\"w-5 h-5\" />\n            </button>\n          </div>\n        )}\n\n        {/* Quick Create Button */}\n        <div className={cn(\"py-4\", isCollapsed && !isMobileOpen ? \"px-3\" : \"px-4\")}>\n          <Link\n            href=\"/create\"\n            onClick={onMobileClose}\n            className={cn(\n              \"flex items-center justify-center bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white font-medium transition-all duration-200 shadow-lg shadow-blue-600/25 hover:shadow-blue-500/40\",\n              isCollapsed && !isMobileOpen\n                ? \"w-10 h-10 rounded-lg\"\n                : \"w-full px-4 py-3 rounded-xl gap-3\"\n            )}\n            title=\"Create New SOP\"\n          >\n            <Plus className={cn(\"flex-shrink-0\", isCollapsed && !isMobileOpen ? \"w-5 h-5\" : \"w-5 h-5\")} />\n            {(!isCollapsed || isMobileOpen) && <span>New SOP</span>}\n          </Link>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 px-3\">\n          {(!isCollapsed || isMobileOpen) && (\n            <div className=\"text-xs font-medium text-slate-500 uppercase tracking-wider px-3 mb-3\">\n              Menu\n            </div>\n          )}\n          <ul className=\"space-y-1\">\n            {menuItems.map((item) => {\n              const isActive = pathname === item.href || pathname.startsWith(item.href + \"/\")\n              return (\n                <li key={item.href}>\n                  <Link\n                    href={item.href}\n                    onClick={onMobileClose}\n                    className={cn(\n                      \"flex items-center gap-3 rounded-xl transition-all duration-200 group\",\n                      isCollapsed && !isMobileOpen\n                        ? \"justify-center p-2.5\"\n                        : \"px-4 py-2.5\",\n                      // Only show background when expanded OR on hover\n                      isCollapsed && !isMobileOpen\n                        ? isActive\n                          ? \"text-white\"\n                          : \"text-slate-400 hover:text-white\"\n                        : isActive\n                          ? \"bg-slate-800 text-white shadow-md\"\n                          : \"hover:bg-slate-800/50 hover:text-white\"\n                    )}\n                    title={isCollapsed && !isMobileOpen ? item.label : undefined}\n                  >\n                    <item.icon\n                      className={cn(\n                        \"w-5 h-5 flex-shrink-0 transition-colors duration-200\",\n                        isActive ? \"text-blue-400\" : \"text-slate-400 group-hover:text-slate-300\"\n                      )}\n                    />\n                    {(!isCollapsed || isMobileOpen) && (\n                      <>\n                        <span className=\"flex-1\">{item.label}</span>\n                        {isActive && <ChevronRight className=\"w-4 h-4 text-slate-500\" />}\n                      </>\n                    )}\n                  </Link>\n                </li>\n              )\n            })}\n          </ul>\n        </nav>\n\n        {/* User Section */}\n        <div className=\"border-t border-slate-800 p-4\">\n          <div\n            className={cn(\n              \"flex items-center gap-3 rounded-xl hover:bg-slate-800/50 transition-colors cursor-pointer\",\n              isCollapsed && !isMobileOpen ? \"justify-center p-2\" : \"px-2 py-2\"\n            )}\n            title={isCollapsed && !isMobileOpen ? \"John Doe\" : undefined}\n          >\n            <Avatar className=\"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 flex-shrink-0 shadow-lg shadow-blue-500/25\">\n              <AvatarFallback className=\"bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-sm font-medium\">\n                JD\n              </AvatarFallback>\n            </Avatar>\n            {(!isCollapsed || isMobileOpen) && (\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-white truncate\">John Doe</p>\n                <p className=\"text-xs text-slate-500 truncate\">john@company.com</p>\n              </div>\n            )}\n          </div>\n          <button\n            className={cn(\n              \"flex items-center gap-3 w-full mt-2 text-sm text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-xl transition-colors\",\n              isCollapsed && !isMobileOpen ? \"justify-center p-3\" : \"px-4 py-2.5\"\n            )}\n            title={isCollapsed && !isMobileOpen ? \"Sign out\" : undefined}\n          >\n            <LogOut className=\"w-4 h-4 flex-shrink-0\" />\n            {(!isCollapsed || isMobileOpen) && <span>Sign out</span>}\n          </button>\n        </div>\n      </aside>\n    </>\n  )\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;;;AAhBA;;;;;;AAkBA,MAAM,YAAY;IAChB;QAAE,MAAM,kPAAe;QAAE,OAAO;QAAa,MAAM;IAAa;IAChE;QAAE,MAAM,mOAAU;QAAE,OAAO;QAAW,MAAM;IAAW;IACvD;QAAE,MAAM,yNAAQ;QAAE,OAAO;QAAY,MAAM;IAAY;CACxD;AASM,SAAS,QAAQ,EAAE,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE,aAAa,EAAgB;;IAC1F,MAAM,WAAW,IAAA,oJAAW;IAE5B,qBACE;;YAEG,8BACC,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,oHACA,iCAAiC;gBACjC,kBACA,cAAc,YAAY,WAC1B,uBAAuB;gBACvB,gBAAgB;;kCAIlB,6LAAC;wBACC,WAAW,IAAA,qHAAE,EACX,0DACA,eAAe,CAAC,eAAe,wBAAwB;;0CAIzD,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,6NAAQ;oCAAC,WAAU;;;;;;;;;;;4BAIrB,CAAC,CAAC,eAAe,YAAY,mBAC5B,6LAAC;gCAAK,WAAU;0CAAwD;;;;;;4BAMzE,6BACC,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,oMAAC;oCAAC,WAAU;;;;;;;;;;qDAGf,6LAAC;gCACC,SAAS;gCACT,WAAW,IAAA,qHAAE,EACX,4HACA,eAAe;gCAEjB,OAAO,cAAc,mBAAmB;0CAExC,cAAA,6LAAC,sOAAW;oCAAC,WAAU;;;;;;;;;;;;;;;;;oBAM5B,eAAe,CAAC,8BACf,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,OAAM;sCAEN,cAAA,6LAAC,yOAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAM9B,6LAAC;wBAAI,WAAW,IAAA,qHAAE,EAAC,QAAQ,eAAe,CAAC,eAAe,SAAS;kCACjE,cAAA,6LAAC,0KAAI;4BACH,MAAK;4BACL,SAAS;4BACT,WAAW,IAAA,qHAAE,EACX,8NACA,eAAe,CAAC,eACZ,yBACA;4BAEN,OAAM;;8CAEN,6LAAC,6MAAI;oCAAC,WAAW,IAAA,qHAAE,EAAC,iBAAiB,eAAe,CAAC,eAAe,YAAY;;;;;;gCAC/E,CAAC,CAAC,eAAe,YAAY,mBAAK,6LAAC;8CAAK;;;;;;;;;;;;;;;;;kCAK7C,6LAAC;wBAAI,WAAU;;4BACZ,CAAC,CAAC,eAAe,YAAY,mBAC5B,6LAAC;gCAAI,WAAU;0CAAwE;;;;;;0CAIzF,6LAAC;gCAAG,WAAU;0CACX,UAAU,GAAG,CAAC,CAAC;oCACd,MAAM,WAAW,aAAa,KAAK,IAAI,IAAI,SAAS,UAAU,CAAC,KAAK,IAAI,GAAG;oCAC3E,qBACE,6LAAC;kDACC,cAAA,6LAAC,0KAAI;4CACH,MAAM,KAAK,IAAI;4CACf,SAAS;4CACT,WAAW,IAAA,qHAAE,EACX,wEACA,eAAe,CAAC,eACZ,yBACA,eACJ,iDAAiD;4CACjD,eAAe,CAAC,eACZ,WACE,eACA,oCACF,WACE,sCACA;4CAER,OAAO,eAAe,CAAC,eAAe,KAAK,KAAK,GAAG;;8DAEnD,6LAAC,KAAK,IAAI;oDACR,WAAW,IAAA,qHAAE,EACX,wDACA,WAAW,kBAAkB;;;;;;gDAGhC,CAAC,CAAC,eAAe,YAAY,mBAC5B;;sEACE,6LAAC;4DAAK,WAAU;sEAAU,KAAK,KAAK;;;;;;wDACnC,0BAAY,6LAAC,yOAAY;4DAAC,WAAU;;;;;;;;;;;;;;uCA7BpC,KAAK,IAAI;;;;;gCAmCtB;;;;;;;;;;;;kCAKJ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAW,IAAA,qHAAE,EACX,6FACA,eAAe,CAAC,eAAe,uBAAuB;gCAExD,OAAO,eAAe,CAAC,eAAe,aAAa;;kDAEnD,6LAAC,wIAAM;wCAAC,WAAU;kDAChB,cAAA,6LAAC,gJAAc;4CAAC,WAAU;sDAA+E;;;;;;;;;;;oCAI1G,CAAC,CAAC,eAAe,YAAY,mBAC5B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAE,WAAU;0DAA0C;;;;;;0DACvD,6LAAC;gDAAE,WAAU;0DAAkC;;;;;;;;;;;;;;;;;;0CAIrD,6LAAC;gCACC,WAAW,IAAA,qHAAE,EACX,kIACA,eAAe,CAAC,eAAe,uBAAuB;gCAExD,OAAO,eAAe,CAAC,eAAe,aAAa;;kDAEnD,6LAAC,uNAAM;wCAAC,WAAU;;;;;;oCACjB,CAAC,CAAC,eAAe,YAAY,mBAAK,6LAAC;kDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrD;GAtLgB;;QACG,oJAAW;;;KADd"}},
    {"offset": {"line": 1641, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/layout/dashboard-layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { Sidebar } from \"@/components/layout/sidebar\"\nimport { cn } from \"@/lib/utils\"\nimport { Menu, FileText } from \"lucide-react\"\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode\n  fullHeight?: boolean\n}\n\nexport function DashboardLayout({ children, fullHeight = false }: DashboardLayoutProps) {\n  const [isCollapsed, setIsCollapsed] = useState(false)\n  const [isMobile, setIsMobile] = useState(false)\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const mobile = window.innerWidth < 768\n      setIsMobile(mobile)\n\n      // Auto-collapse on tablet screens (768-1024px)\n      if (window.innerWidth >= 768 && window.innerWidth < 1024) {\n        setIsCollapsed(true)\n      }\n\n      // Close mobile menu when resizing to desktop\n      if (!mobile) {\n        setIsMobileMenuOpen(false)\n      }\n    }\n\n    // Check on mount\n    checkScreenSize()\n\n    // Listen for resize\n    window.addEventListener(\"resize\", checkScreenSize)\n    return () => window.removeEventListener(\"resize\", checkScreenSize)\n  }, [])\n\n  const toggleSidebar = () => {\n    setIsCollapsed((prev) => !prev)\n  }\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen((prev) => !prev)\n  }\n\n  const closeMobileMenu = () => {\n    setIsMobileMenuOpen(false)\n  }\n\n  return (\n    <div className={cn(\n      \"bg-gradient-to-br from-slate-50 via-slate-100 to-blue-50/30\",\n      fullHeight ? \"h-screen overflow-hidden\" : \"min-h-screen\"\n    )}>\n      {/* Mobile Top Navbar */}\n      <header className=\"fixed top-0 left-0 right-0 h-16 bg-slate-900 text-white flex items-center justify-between px-4 z-30 md:hidden\">\n        <button\n          onClick={toggleMobileMenu}\n          className=\"w-10 h-10 flex items-center justify-center text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n          aria-label=\"Toggle menu\"\n        >\n          <Menu className=\"w-6 h-6\" />\n        </button>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\">\n            <FileText className=\"w-4 h-4 text-white\" />\n          </div>\n          <span className=\"text-lg font-bold\">StepWise</span>\n        </div>\n\n        {/* Spacer for symmetry */}\n        <div className=\"w-10\" />\n      </header>\n\n      <Sidebar\n        isCollapsed={isCollapsed}\n        onToggle={toggleSidebar}\n        isMobileOpen={isMobileMenuOpen}\n        onMobileClose={closeMobileMenu}\n      />\n\n      <main\n        className={cn(\n          \"transition-all duration-300 ease-in-out\",\n          fullHeight ? \"h-screen overflow-hidden\" : \"min-h-screen\",\n          // Mobile: add top padding for navbar, no side margin\n          isMobile ? \"pt-16 ml-0\" : isCollapsed ? \"ml-20\" : \"ml-64\"\n        )}\n      >\n        {children}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AAAA;;;AANA;;;;;AAaO,SAAS,gBAAgB,EAAE,QAAQ,EAAE,aAAa,KAAK,EAAwB;;IACpF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IAEzD,IAAA,0KAAS;qCAAC;YACR,MAAM;6DAAkB;oBACtB,MAAM,SAAS,OAAO,UAAU,GAAG;oBACnC,YAAY;oBAEZ,+CAA+C;oBAC/C,IAAI,OAAO,UAAU,IAAI,OAAO,OAAO,UAAU,GAAG,MAAM;wBACxD,eAAe;oBACjB;oBAEA,6CAA6C;oBAC7C,IAAI,CAAC,QAAQ;wBACX,oBAAoB;oBACtB;gBACF;;YAEA,iBAAiB;YACjB;YAEA,oBAAoB;YACpB,OAAO,gBAAgB,CAAC,UAAU;YAClC;6CAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;oCAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,eAAe,CAAC,OAAS,CAAC;IAC5B;IAEA,MAAM,mBAAmB;QACvB,oBAAoB,CAAC,OAAS,CAAC;IACjC;IAEA,MAAM,kBAAkB;QACtB,oBAAoB;IACtB;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAChB,+DACA,aAAa,6BAA6B;;0BAG1C,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;kCAGlB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,6NAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,6LAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;kCAItC,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,6LAAC,8IAAO;gBACN,aAAa;gBACb,UAAU;gBACV,cAAc;gBACd,eAAe;;;;;;0BAGjB,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,2CACA,aAAa,6BAA6B,gBAC1C,qDAAqD;gBACrD,WAAW,eAAe,cAAc,UAAU;0BAGnD;;;;;;;;;;;;AAIT;GAtFgB;KAAA"}},
    {"offset": {"line": 1800, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/app/create/page.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - CREATE SOP PAGE\n// Main interface for AI-powered SOP creation with 5-phase conversation flow\n// =============================================================================\n\nimport { useState, useRef, useEffect, useCallback } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\nimport { experimental_useObject as useObject } from \"@ai-sdk/react\"\nimport { ArrowLeft, Save, FileEdit, MessageSquare, Bot, User, Send, PanelRightClose, PanelRightOpen } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { NotesPanel } from \"@/components/notes/notes-panel\"\nimport { PhaseBadge } from \"@/components/chat/phase-indicator\"\nimport { DashboardLayout } from \"@/components/layout/dashboard-layout\"\nimport { useSOPContext } from \"@/lib/sop-context\"\nimport { aiResponseSchema } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\nimport type { Note, ConversationPhase, SOP, ChatMessage, AIResponse } from \"@/lib/types\"\nimport { generateId } from \"@/lib/types\"\n\n// -----------------------------------------------------------------------------\n// Initial Greeting Message\n// -----------------------------------------------------------------------------\n\nconst INITIAL_GREETING =\n  \"Hello! I'm here to help you create a professional SOP. Let's start with the basics.\\n\\nWhat process or procedure would you like to document today?\"\n\n// -----------------------------------------------------------------------------\n// Message Bubble Component\n// -----------------------------------------------------------------------------\n\ninterface MessageBubbleProps {\n  role: \"user\" | \"assistant\"\n  content: string\n}\n\nfunction MessageBubble({ role, content }: MessageBubbleProps) {\n  const isAI = role === \"assistant\"\n\n  return (\n    <div className={cn(\"flex gap-3 mb-4\", isAI ? \"justify-start\" : \"justify-end\")}>\n      {isAI && (\n        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\n          <Bot className=\"w-4 h-4 text-white\" />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"max-w-[85%] sm:max-w-[80%] px-3 sm:px-4 py-2.5 sm:py-3 rounded-2xl\",\n          isAI ? \"bg-gray-100 text-gray-900 rounded-tl-sm\" : \"bg-blue-600 text-white rounded-tr-sm\"\n        )}\n      >\n        <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{content}</p>\n      </div>\n      {!isAI && (\n        <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0\">\n          <User className=\"w-4 h-4 text-gray-600\" />\n        </div>\n      )}\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Typing Indicator Component\n// -----------------------------------------------------------------------------\n\nfunction TypingIndicator() {\n  return (\n    <div className=\"flex gap-3 mb-4 justify-start\">\n      <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\n        <Bot className=\"w-4 h-4 text-white\" />\n      </div>\n      <div className=\"bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3\">\n        <div className=\"flex gap-1\">\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Main Component\n// -----------------------------------------------------------------------------\n\nexport default function CreateSOPPage() {\n  const router = useRouter()\n  const { addSOP, session, startNewSession, addSessionNotes, setSessionPhase } = useSOPContext()\n\n  // Local state\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([])\n  const [notes, setNotes] = useState<Note[]>([])\n  const [currentPhase, setCurrentPhase] = useState<ConversationPhase>(\"foundation\")\n  const [progress, setProgress] = useState(0)\n  const [activeTab, setActiveTab] = useState<\"chat\" | \"notes\">(\"chat\")\n  const [inputValue, setInputValue] = useState(\"\")\n  const [isNotesCollapsed, setIsNotesCollapsed] = useState(false)\n\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Initialize session on mount\n  useEffect(() => {\n    if (!session) {\n      startNewSession()\n    }\n  }, [session, startNewSession])\n\n  // -------------------------------------------------------------------------\n  // Object Streaming Hook\n  // -------------------------------------------------------------------------\n\n  const { object, submit, isLoading } = useObject({\n    api: \"/api/chat/sop\",\n    schema: aiResponseSchema,\n    onFinish: ({ object }) => {\n      if (!object) return\n\n      // Add assistant message to history\n      const aiMessage: ChatMessage = {\n        id: generateId(\"msg\"),\n        role: \"ai\",\n        content: object.message || \"\",\n        timestamp: new Date().toISOString(),\n      }\n      setChatHistory((prev) => [...prev, aiMessage])\n\n      // Extract and add notes\n      if (object.notes && object.notes.length > 0) {\n        const newNotes: Note[] = object.notes.map((n) => ({\n          id: generateId(\"note\"),\n          category: n.category as any,\n          priority: n.priority,\n          timestamp: new Date().toISOString(),\n          source: \"AI Extraction\",\n          content: n.content,\n          relatedTo: n.relatedTo,\n          action: n.action,\n        }))\n        setNotes((prev) => [...prev, ...newNotes])\n        addSessionNotes(newNotes)\n      }\n\n      // Update phase and progress\n      if (object.phase) {\n        setCurrentPhase(object.phase as ConversationPhase)\n        setSessionPhase(object.phase as ConversationPhase, object.progress || 0)\n      }\n\n      if (typeof object.progress === \"number\") {\n        setProgress(object.progress)\n      }\n    },\n  })\n\n  // -------------------------------------------------------------------------\n  // Scroll to Bottom\n  // -------------------------------------------------------------------------\n\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }, [])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [chatHistory, object, isLoading, scrollToBottom])\n\n  // -------------------------------------------------------------------------\n  // Message Sending\n  // -------------------------------------------------------------------------\n\n  const handleSendMessage = useCallback(() => {\n    if (!inputValue.trim() || isLoading) return\n\n    const userMessage: ChatMessage = {\n      id: generateId(\"msg\"),\n      role: \"user\",\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString(),\n    }\n\n    const newHistory = [...chatHistory, userMessage]\n    setChatHistory(newHistory)\n    setInputValue(\"\")\n\n    // Use current mode and messages for the request\n    submit({\n      messages: newHistory,\n      mode: \"create\"\n    })\n  }, [inputValue, isLoading, chatHistory, submit])\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault()\n        handleSendMessage()\n      }\n    },\n    [handleSendMessage]\n  )\n\n  // -------------------------------------------------------------------------\n  // Actions\n  // -------------------------------------------------------------------------\n\n  const handleSaveDraft = useCallback(() => {\n    const newSOP: SOP = {\n      id: `sop-${Date.now()}`,\n      title: \"New SOP Draft\",\n      department: \"General\",\n      status: \"draft\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      content: \"\",\n      notes,\n      chatHistory,\n    }\n    addSOP(newSOP)\n    router.push(\"/dashboard\")\n  }, [notes, chatHistory, addSOP, router])\n\n  const handleReview = useCallback(() => {\n    const sopId = `sop-${Date.now()}`\n    const newSOP: SOP = {\n      id: sopId,\n      title: \"New SOP\",\n      department: \"General\",\n      status: \"draft\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      content: \"\",\n      notes,\n      chatHistory,\n    }\n    addSOP(newSOP)\n    router.push(`/review/${sopId}`)\n  }, [notes, chatHistory, addSOP, router])\n\n  const handleDeleteNote = useCallback((id: string) => {\n    setNotes((prev) => prev.filter((n) => n.id !== id))\n  }, [])\n\n  // -------------------------------------------------------------------------\n  // Render\n  // -------------------------------------------------------------------------\n\n  return (\n    <DashboardLayout fullHeight>\n      <div className=\"h-full flex flex-col\">\n        {/* Header */}\n        <header className=\"bg-white border-b border-slate-200 px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between flex-shrink-0\">\n          <div className=\"flex items-center gap-4\">\n            <Link\n              href=\"/dashboard\"\n              className=\"text-slate-500 hover:text-slate-700 flex items-center gap-2 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              <span className=\"hidden sm:inline\">Back to Dashboard</span>\n            </Link>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-lg font-semibold text-slate-900 hidden sm:block\">Creating New SOP</h1>\n            <PhaseBadge phase={currentPhase} progress={progress} />\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            {/* Notes Panel Toggle - Desktop only */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setIsNotesCollapsed(!isNotesCollapsed)}\n              className=\"hidden lg:flex\"\n              title={isNotesCollapsed ? \"Show Notes Panel\" : \"Hide Notes Panel\"}\n            >\n              {isNotesCollapsed ? (\n                <PanelRightOpen className=\"w-5 h-5\" />\n              ) : (\n                <PanelRightClose className=\"w-5 h-5\" />\n              )}\n            </Button>\n            <Button variant=\"outline\" onClick={handleSaveDraft} className=\"gap-2 bg-white\">\n              <Save className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Save Draft</span>\n            </Button>\n          </div>\n        </header>\n\n        {/* Mobile Tab Navigation */}\n        <div className=\"lg:hidden flex border-b border-slate-200 bg-white flex-shrink-0\">\n          <button\n            onClick={() => setActiveTab(\"chat\")}\n            className={cn(\n              \"flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors\",\n              activeTab === \"chat\"\n                ? \"text-blue-600 border-b-2 border-blue-600\"\n                : \"text-slate-500 hover:text-slate-700\"\n            )}\n          >\n            <MessageSquare className=\"w-4 h-4\" />\n            Chat\n          </button>\n          <button\n            onClick={() => setActiveTab(\"notes\")}\n            className={cn(\n              \"flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors\",\n              activeTab === \"notes\"\n                ? \"text-blue-600 border-b-2 border-blue-600\"\n                : \"text-slate-500 hover:text-slate-700\"\n            )}\n          >\n            <FileEdit className=\"w-4 h-4\" />\n            Notes ({notes.length})\n          </button>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex overflow-hidden\">\n          {/* Chat Area */}\n          <div\n            className={cn(\n              \"flex-1 flex flex-col bg-white\",\n              activeTab === \"notes\" ? \"hidden lg:flex\" : \"flex\",\n              !isNotesCollapsed && \"lg:border-r border-slate-200\"\n            )}\n          >\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\n              {/* Initial greeting */}\n              <MessageBubble role=\"assistant\" content={INITIAL_GREETING} />\n\n              {/* Chat history */}\n              {chatHistory.map((message) => (\n                <MessageBubble\n                  key={message.id}\n                  role={message.role === \"ai\" ? \"assistant\" : \"user\"}\n                  content={message.content}\n                />\n              ))}\n\n              {/* Current streaming message */}\n              {isLoading && object && object.message && (\n                <MessageBubble role=\"assistant\" content={object.message} />\n              )}\n\n              {/* Loading indicator */}\n              {isLoading && !object?.message && <TypingIndicator />}\n\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input */}\n            <div className=\"border-t border-gray-200 bg-white p-3 sm:p-4 flex-shrink-0\">\n              <div className=\"flex gap-2 sm:gap-3 items-end\">\n                <textarea\n                  value={inputValue}\n                  onChange={(e) => setInputValue(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"Type your response here...\"\n                  disabled={isLoading}\n                  className=\"flex-1 resize-none border border-gray-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 min-h-[48px] max-h-[120px]\"\n                  rows={1}\n                />\n                <Button\n                  onClick={handleSendMessage}\n                  disabled={!inputValue.trim() || isLoading}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white h-12 w-12 rounded-xl p-0\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Notes Panel - Desktop */}\n          <div\n            className={cn(\n              \"hidden lg:flex flex-col transition-all duration-300\",\n              isNotesCollapsed ? \"w-0 overflow-hidden\" : \"w-96\"\n            )}\n          >\n            <NotesPanel\n              notes={notes}\n              onDeleteNote={handleDeleteNote}\n              onReview={handleReview}\n              progress={progress}\n              phase={currentPhase}\n            />\n          </div>\n\n          {/* Notes Panel - Mobile */}\n          <div className={cn(\"flex-1 lg:hidden\", activeTab === \"chat\" ? \"hidden\" : \"flex flex-col\")}>\n            <NotesPanel\n              notes={notes}\n              onDeleteNote={handleDeleteNote}\n              onReview={handleReview}\n              progress={progress}\n              phase={currentPhase}\n            />\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}