{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/sop/markdown-renderer.tsx"],"sourcesContent":["\"use client\"\n\nimport ReactMarkdown from \"react-markdown\"\n\ninterface MarkdownRendererProps {\n  content: string\n}\n\nexport function MarkdownRenderer({ content }: MarkdownRendererProps) {\n  return (\n    <div className=\"prose prose-gray max-w-none\">\n      <ReactMarkdown\n        components={{\n          h1: ({ children }) => <h1 className=\"text-3xl font-bold text-gray-900 mb-4 pb-2 border-b\">{children}</h1>,\n          h2: ({ children }) => <h2 className=\"text-2xl font-bold text-gray-900 mt-8 mb-4\">{children}</h2>,\n          h3: ({ children }) => <h3 className=\"text-xl font-semibold text-gray-800 mt-6 mb-3\">{children}</h3>,\n          h4: ({ children }) => <h4 className=\"text-lg font-semibold text-gray-700 mt-4 mb-2\">{children}</h4>,\n          p: ({ children }) => <p className=\"text-gray-700 leading-relaxed mb-4\">{children}</p>,\n          ul: ({ children }) => <ul className=\"list-disc list-inside space-y-1 mb-4 text-gray-700\">{children}</ul>,\n          ol: ({ children }) => <ol className=\"list-decimal list-inside space-y-1 mb-4 text-gray-700\">{children}</ol>,\n          li: ({ children }) => <li className=\"text-gray-700\">{children}</li>,\n          strong: ({ children }) => <strong className=\"font-semibold text-gray-900\">{children}</strong>,\n          hr: () => <hr className=\"my-6 border-gray-200\" />,\n          table: ({ children }) => (\n            <div className=\"overflow-x-auto mb-4\">\n              <table className=\"min-w-full border border-gray-200 divide-y divide-gray-200\">{children}</table>\n            </div>\n          ),\n          thead: ({ children }) => <thead className=\"bg-gray-50\">{children}</thead>,\n          tbody: ({ children }) => <tbody className=\"divide-y divide-gray-200 bg-white\">{children}</tbody>,\n          tr: ({ children }) => <tr>{children}</tr>,\n          th: ({ children }) => (\n            <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n              {children}\n            </th>\n          ),\n          td: ({ children }) => <td className=\"px-4 py-3 text-sm text-gray-700\">{children}</td>,\n          blockquote: ({ children }) => (\n            <blockquote className=\"border-l-4 border-blue-500 pl-4 italic text-gray-600 my-4\">{children}</blockquote>\n          ),\n          code: ({ children }) => (\n            <code className=\"bg-gray-100 px-1.5 py-0.5 rounded text-sm text-gray-800 font-mono\">{children}</code>\n          ),\n          pre: ({ children }) => (\n            <pre className=\"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto mb-4\">{children}</pre>\n          ),\n        }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,SAAS,iBAAiB,EAAE,OAAO,EAAyB;IACjE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,sMAAa;YACZ,YAAY;gBACV,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAuD;;;;;;gBAC3F,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;gBAClF,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAiD;;;;;;gBACrF,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAiD;;;;;;gBACrF,GAAG,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAE,WAAU;kCAAsC;;;;;;gBACxE,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAsD;;;;;;gBAC1F,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAyD;;;;;;gBAC7F,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAiB;;;;;;gBACrD,QAAQ,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAO,WAAU;kCAA+B;;;;;;gBAC3E,IAAI,kBAAM,6LAAC;wBAAG,WAAU;;;;;;gBACxB,OAAO,CAAC,EAAE,QAAQ,EAAE,iBAClB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;sCAA8D;;;;;;;;;;;gBAGnF,OAAO,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAM,WAAU;kCAAc;;;;;;gBACxD,OAAO,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAM,WAAU;kCAAqC;;;;;;gBAC/E,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;kCAAI;;;;;;gBAC3B,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6LAAC;wBAAG,WAAU;kCACX;;;;;;gBAGL,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;gBACvE,YAAY,CAAC,EAAE,QAAQ,EAAE,iBACvB,6LAAC;wBAAW,WAAU;kCAA6D;;;;;;gBAErF,MAAM,CAAC,EAAE,QAAQ,EAAE,iBACjB,6LAAC;wBAAK,WAAU;kCAAqE;;;;;;gBAEvF,KAAK,CAAC,EAAE,QAAQ,EAAE,iBAChB,6LAAC;wBAAI,WAAU;kCAAiE;;;;;;YAEpF;sBAEC;;;;;;;;;;;AAIT;KA5CgB"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/sop/download-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Download, FileText, FileIcon, FileCode, Clipboard, Check, ChevronDown } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { cn } from \"@/lib/utils\"\n\ninterface DownloadMenuProps {\n  content: string\n  title: string\n}\n\nexport function DownloadMenu({ content, title }: DownloadMenuProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [copied, setCopied] = useState(false)\n  const [downloading, setDownloading] = useState<string | null>(null)\n\n  const handleDownload = (format: string) => {\n    setDownloading(format)\n\n    setTimeout(() => {\n      // Simulate download\n      const blob = new Blob([content], { type: \"text/plain\" })\n      const url = URL.createObjectURL(blob)\n      const a = document.createElement(\"a\")\n      a.href = url\n      a.download = `${title.replace(/\\s+/g, \"-\").toLowerCase()}.${format === \"markdown\" ? \"md\" : format}`\n      document.body.appendChild(a)\n      a.click()\n      document.body.removeChild(a)\n      URL.revokeObjectURL(url)\n\n      setDownloading(null)\n      setIsOpen(false)\n    }, 500)\n  }\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(content)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n    setIsOpen(false)\n  }\n\n  const options = [\n    { id: \"markdown\", label: \"Markdown (.md)\", icon: FileText },\n    { id: \"pdf\", label: \"PDF Document\", icon: FileIcon },\n    { id: \"docx\", label: \"Word (.docx)\", icon: FileText },\n    { id: \"html\", label: \"HTML File\", icon: FileCode },\n  ]\n\n  return (\n    <div className=\"relative\">\n      <Button onClick={() => setIsOpen(!isOpen)} className=\"bg-blue-600 hover:bg-blue-700 text-white gap-2\">\n        <Download className=\"w-4 h-4\" />\n        Download\n        <ChevronDown className={cn(\"w-4 h-4 transition-transform\", isOpen && \"rotate-180\")} />\n      </Button>\n\n      {isOpen && (\n        <>\n          <div className=\"fixed inset-0 z-10\" onClick={() => setIsOpen(false)} />\n          <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20\">\n            {options.map((option) => (\n              <button\n                key={option.id}\n                onClick={() => handleDownload(option.id)}\n                disabled={downloading === option.id}\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50\"\n              >\n                <option.icon className=\"w-4 h-4 text-gray-500\" />\n                {option.label}\n                {downloading === option.id && (\n                  <div className=\"ml-auto w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\" />\n                )}\n              </button>\n            ))}\n            <hr className=\"my-2 border-gray-100\" />\n            <button\n              onClick={handleCopy}\n              className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"w-4 h-4 text-green-600\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Clipboard className=\"w-4 h-4 text-gray-500\" />\n                  Copy to Clipboard\n                </>\n              )}\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,aAAa,EAAE,OAAO,EAAE,KAAK,EAAqB;;IAChE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAE9D,MAAM,iBAAiB,CAAC;QACtB,eAAe;QAEf,WAAW;YACT,oBAAoB;YACpB,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAQ,EAAE;gBAAE,MAAM;YAAa;YACtD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,GAAG,MAAM,OAAO,CAAC,QAAQ,KAAK,WAAW,GAAG,CAAC,EAAE,WAAW,aAAa,OAAO,QAAQ;YACnG,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,IAAI,eAAe,CAAC;YAEpB,eAAe;YACf,UAAU;QACZ,GAAG;IACL;IAEA,MAAM,aAAa;QACjB,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;QACpC,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;QACnC,UAAU;IACZ;IAEA,MAAM,UAAU;QACd;YAAE,IAAI;YAAY,OAAO;YAAkB,MAAM,6NAAQ;QAAC;QAC1D;YAAE,IAAI;YAAO,OAAO;YAAgB,MAAM,qNAAQ;QAAC;QACnD;YAAE,IAAI;YAAQ,OAAO;YAAgB,MAAM,6NAAQ;QAAC;QACpD;YAAE,IAAI;YAAQ,OAAO;YAAa,MAAM,6NAAQ;QAAC;KAClD;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,wIAAM;gBAAC,SAAS,IAAM,UAAU,CAAC;gBAAS,WAAU;;kCACnD,6LAAC,yNAAQ;wBAAC,WAAU;;;;;;oBAAY;kCAEhC,6LAAC,sOAAW;wBAAC,WAAW,IAAA,qHAAE,EAAC,gCAAgC,UAAU;;;;;;;;;;;;YAGtE,wBACC;;kCACE,6LAAC;wBAAI,WAAU;wBAAqB,SAAS,IAAM,UAAU;;;;;;kCAC7D,6LAAC;wBAAI,WAAU;;4BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;oCAEC,SAAS,IAAM,eAAe,OAAO,EAAE;oCACvC,UAAU,gBAAgB,OAAO,EAAE;oCACnC,WAAU;;sDAEV,6LAAC,OAAO,IAAI;4CAAC,WAAU;;;;;;wCACtB,OAAO,KAAK;wCACZ,gBAAgB,OAAO,EAAE,kBACxB,6LAAC;4CAAI,WAAU;;;;;;;mCARZ,OAAO,EAAE;;;;;0CAYlB,6LAAC;gCAAG,WAAU;;;;;;0CACd,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET,uBACC;;sDACE,6LAAC,gNAAK;4CAAC,WAAU;;;;;;wCAA2B;;iEAI9C;;sDACE,6LAAC,4NAAS;4CAAC,WAAU;;;;;;wCAA0B;;;;;;;;;;;;;;;;;;;;;;AAUjE;GAvFgB;KAAA"}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/sop/section-editor-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { X, Send, Sparkles } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface SectionEditorModalProps {\n  sectionTitle: string\n  content: string\n  isOpen: boolean\n  onClose: () => void\n  onSave: (content: string) => void\n}\n\nexport function SectionEditorModal({ sectionTitle, content, isOpen, onClose, onSave }: SectionEditorModalProps) {\n  const [editedContent, setEditedContent] = useState(content)\n  const [aiPrompt, setAiPrompt] = useState(\"\")\n  const [isAiLoading, setIsAiLoading] = useState(false)\n\n  if (!isOpen) return null\n\n  const handleAiRequest = () => {\n    if (!aiPrompt.trim()) return\n\n    setIsAiLoading(true)\n    setTimeout(() => {\n      // Simulate AI modification\n      setEditedContent((prev) => prev + `\\n\\n*AI suggestion based on: \"${aiPrompt}\"*`)\n      setAiPrompt(\"\")\n      setIsAiLoading(false)\n    }, 1500)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault()\n      handleAiRequest()\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Editing: {sectionTitle}</h2>\n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose} className=\"h-8 w-8 p-0\">\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n          {/* Original Content (Read-only) */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Current Content:</label>\n            <div className=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-600 max-h-32 overflow-y-auto\">\n              <pre className=\"whitespace-pre-wrap font-mono\">{content}</pre>\n            </div>\n          </div>\n\n          {/* Editable Content */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Edit Mode:</label>\n            <textarea\n              value={editedContent}\n              onChange={(e) => setEditedContent(e.target.value)}\n              className=\"w-full h-48 p-4 border border-gray-300 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n            />\n          </div>\n\n          {/* AI Assistant */}\n          <div className=\"bg-blue-50 rounded-lg p-4\">\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Sparkles className=\"w-4 h-4 text-blue-600\" />\n              <h4 className=\"font-medium text-blue-900\">AI Assistant</h4>\n            </div>\n            <p className=\"text-sm text-blue-700 mb-3\">Ask me to modify this section:</p>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={aiPrompt}\n                onChange={(e) => setAiPrompt(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder='e.g., \"Add quality check after step 3\"'\n                disabled={isAiLoading}\n                className=\"flex-1 px-4 py-2 border border-blue-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\"\n              />\n              <Button\n                onClick={handleAiRequest}\n                disabled={!aiPrompt.trim() || isAiLoading}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n              >\n                {isAiLoading ? (\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <Send className=\"w-4 h-4\" />\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex gap-3 p-4 border-t border-gray-200 bg-gray-50\">\n          <Button variant=\"outline\" onClick={() => setEditedContent(content)} className=\"text-gray-600 bg-transparent\">\n            Revert to Original\n          </Button>\n          <div className=\"flex-1\" />\n          <Button variant=\"outline\" onClick={onClose} className=\"bg-transparent\">\n            Cancel\n          </Button>\n          <Button onClick={() => onSave(editedContent)} className=\"bg-blue-600 hover:bg-blue-700 text-white\">\n            Save Changes\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AAAA;AAAA;AACA;;;AANA;;;;AAgBO,SAAS,mBAAmB,EAAE,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAA2B;;IAC5G,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,kBAAkB;QACtB,IAAI,CAAC,SAAS,IAAI,IAAI;QAEtB,eAAe;QACf,WAAW;YACT,2BAA2B;YAC3B,iBAAiB,CAAC,OAAS,OAAO,CAAC,8BAA8B,EAAE,SAAS,EAAE,CAAC;YAC/E,YAAY;YACZ,eAAe;QACjB,GAAG;IACL;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;;gCAAsC;gCAAU;;;;;;;sCAC9D,6LAAC,wIAAM;4BAAC,SAAQ;4BAAQ,MAAK;4BAAK,SAAS;4BAAS,WAAU;sCAC5D,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;kDAAiC;;;;;;;;;;;;;;;;;sCAKpD,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,6LAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;oCAChD,WAAU;;;;;;;;;;;;sCAKd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,yNAAQ;4CAAC,WAAU;;;;;;sDACpB,6LAAC;4CAAG,WAAU;sDAA4B;;;;;;;;;;;;8CAE5C,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAC1C,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAW;4CACX,aAAY;4CACZ,UAAU;4CACV,WAAU;;;;;;sDAEZ,6LAAC,wIAAM;4CACL,SAAS;4CACT,UAAU,CAAC,SAAS,IAAI,MAAM;4CAC9B,WAAU;sDAET,4BACC,6LAAC;gDAAI,WAAU;;;;;qEAEf,6LAAC,6MAAI;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAQ1B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,iBAAiB;4BAAU,WAAU;sCAA+B;;;;;;sCAG7G,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,SAAS;4BAAS,WAAU;sCAAiB;;;;;;sCAGvE,6LAAC,wIAAM;4BAAC,SAAS,IAAM,OAAO;4BAAgB,WAAU;sCAA2C;;;;;;;;;;;;;;;;;;;;;;;AAO7G;GAzGgB;KAAA"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/app/preview/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter, useParams } from \"next/navigation\"\nimport { ArrowLeft, FileText, Eye, Pencil, CheckCircle, Copy, Check } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { MarkdownRenderer } from \"@/components/sop/markdown-renderer\"\nimport { DownloadMenu } from \"@/components/sop/download-menu\"\nimport { SectionEditorModal } from \"@/components/sop/section-editor-modal\"\nimport { useSOPContext } from \"@/lib/sop-context\"\nimport { cn } from \"@/lib/utils\"\n\ntype ViewMode = \"markdown\" | \"preview\"\n\nexport default function SOPPreviewPage() {\n  const router = useRouter()\n  const params = useParams()\n  const { sops, updateSOP } = useSOPContext()\n\n  const sop = sops.find((s) => s.id === params.id) || sops[0]\n  const [content, setContent] = useState(sop?.content || \"\")\n  const [viewMode, setViewMode] = useState<ViewMode>(\"preview\")\n  const [editingSection, setEditingSection] = useState<{ title: string; content: string } | null>(null)\n  const [copied, setCopied] = useState(false)\n  const [approving, setApproving] = useState(false)\n\n  const handleCopyMarkdown = async () => {\n    await navigator.clipboard.writeText(content)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  const handleApprove = () => {\n    setApproving(true)\n    setTimeout(() => {\n      if (sop) {\n        updateSOP(sop.id, { status: \"complete\", content })\n      }\n      router.push(\"/library\")\n    }, 1000)\n  }\n\n  const handleSectionSave = (newContent: string) => {\n    // In a real app, this would update the specific section\n    setContent(content.replace(editingSection?.content || \"\", newContent))\n    setEditingSection(null)\n  }\n\n  // Extract sections for editing\n  const sections = content.split(/(?=^## )/m).filter(Boolean)\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between sticky top-0 z-10\">\n        <Link href={`/review/${params.id}`} className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\">\n          <ArrowLeft className=\"w-5 h-5\" />\n          <span className=\"hidden sm:inline\">Edit Notes</span>\n        </Link>\n        <h1 className=\"text-lg font-semibold text-gray-900\">Your Generated SOP</h1>\n        <DownloadMenu content={content} title={sop?.title || \"SOP\"} />\n      </header>\n\n      <main className=\"max-w-4xl mx-auto px-4 py-6\">\n        {/* View Toggle */}\n        <div className=\"flex items-center gap-2 mb-6 bg-gray-200 rounded-lg p-1 w-fit\">\n          <button\n            onClick={() => setViewMode(\"markdown\")}\n            className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors\",\n              viewMode === \"markdown\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600 hover:text-gray-900\",\n            )}\n          >\n            <FileText className=\"w-4 h-4\" />\n            Markdown\n          </button>\n          <button\n            onClick={() => setViewMode(\"preview\")}\n            className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors\",\n              viewMode === \"preview\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600 hover:text-gray-900\",\n            )}\n          >\n            <Eye className=\"w-4 h-4\" />\n            Formatted Preview\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\n          {viewMode === \"markdown\" ? (\n            <div className=\"relative\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleCopyMarkdown}\n                className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\n              >\n                {copied ? (\n                  <>\n                    <Check className=\"w-4 h-4 mr-1\" />\n                    Copied\n                  </>\n                ) : (\n                  <>\n                    <Copy className=\"w-4 h-4 mr-1\" />\n                    Copy\n                  </>\n                )}\n              </Button>\n              <div className=\"p-6 overflow-x-auto\">\n                <pre className=\"font-mono text-sm text-gray-800 whitespace-pre-wrap leading-relaxed\">{content}</pre>\n              </div>\n            </div>\n          ) : (\n            <div className=\"p-8\">\n              {sections.map((section, index) => {\n                const lines = section.trim().split(\"\\n\")\n                const title = lines[0]?.replace(/^#+\\s*/, \"\") || `Section ${index + 1}`\n\n                return (\n                  <div key={index} className=\"relative group\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setEditingSection({ title, content: section })}\n                      className=\"absolute -right-2 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-blue-600\"\n                    >\n                      <Pencil className=\"w-4 h-4\" />\n                    </Button>\n                    <MarkdownRenderer content={section} />\n                  </div>\n                )\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* Bottom Actions */}\n        <div className=\"flex flex-col sm:flex-row gap-4 mt-6 justify-end\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setEditingSection({ title: \"Full Document\", content })}\n            className=\"gap-2 bg-transparent\"\n          >\n            <Pencil className=\"w-4 h-4\" />\n            Ask AI to Modify\n          </Button>\n          <Button\n            onClick={handleApprove}\n            disabled={approving}\n            className=\"bg-green-600 hover:bg-green-700 text-white gap-2\"\n          >\n            {approving ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                Approving...\n              </>\n            ) : (\n              <>\n                <CheckCircle className=\"w-4 h-4\" />\n                Approve Final SOP\n              </>\n            )}\n          </Button>\n        </div>\n      </main>\n\n      {/* Section Editor Modal */}\n      {editingSection && (\n        <SectionEditorModal\n          sectionTitle={editingSection.title}\n          content={editingSection.content}\n          isOpen={true}\n          onClose={() => setEditingSection(null)}\n          onSave={handleSectionSave}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}