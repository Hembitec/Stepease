{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,kLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,sLAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oLAA0B;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,iMAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,kHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6LAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/chat/phase-indicator.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - PHASE INDICATOR\n// Visual progress indicator for the 5-phase conversation flow\n// =============================================================================\n\nimport { CheckCircle2, Circle, Loader2 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { CONVERSATION_PHASES, type ConversationPhase } from \"@/lib/types\"\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\ninterface PhaseIndicatorProps {\n    currentPhase: ConversationPhase\n    progress: number // 0-100 overall progress\n    className?: string\n    variant?: \"compact\" | \"detailed\"\n}\n\n// -----------------------------------------------------------------------------\n// Phase Configuration\n// -----------------------------------------------------------------------------\n\nconst PHASE_ORDER: ConversationPhase[] = [\n    \"foundation\",\n    \"process\",\n    \"accountability\",\n    \"quality\",\n    \"finalization\",\n]\n\n// -----------------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------------\n\nexport function PhaseIndicator({\n    currentPhase,\n    progress,\n    className,\n    variant = \"compact\",\n}: PhaseIndicatorProps) {\n    const currentIndex = PHASE_ORDER.indexOf(currentPhase)\n\n    if (variant === \"compact\") {\n        return (\n            <div className={cn(\"flex items-center gap-2\", className)}>\n                {/* Phase Pills */}\n                <div className=\"flex items-center gap-1\">\n                    {PHASE_ORDER.map((phase, index) => {\n                        const isComplete = index < currentIndex\n                        const isCurrent = index === currentIndex\n                        const isPending = index > currentIndex\n\n                        return (\n                            <div\n                                key={phase}\n                                className={cn(\n                                    \"h-2 rounded-full transition-all duration-300\",\n                                    index === 0 ? \"w-8\" : \"w-6\",\n                                    isComplete && \"bg-emerald-500\",\n                                    isCurrent && \"bg-blue-600\",\n                                    isPending && \"bg-slate-200\"\n                                )}\n                                title={CONVERSATION_PHASES[phase].name}\n                            />\n                        )\n                    })}\n                </div>\n\n                {/* Current Phase Label */}\n                <span className=\"text-xs font-medium text-slate-600\">\n                    {CONVERSATION_PHASES[currentPhase].name}\n                </span>\n\n                {/* Progress Percentage */}\n                <span className=\"text-xs text-slate-400\">\n                    {Math.round(progress)}%\n                </span>\n            </div>\n        )\n    }\n\n    // Detailed variant\n    return (\n        <div className={cn(\"space-y-4\", className)}>\n            {/* Overall Progress Bar */}\n            <div className=\"space-y-1\">\n                <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"font-medium text-slate-900\">\n                        {CONVERSATION_PHASES[currentPhase].name}\n                    </span>\n                    <span className=\"text-slate-500\">{Math.round(progress)}% complete</span>\n                </div>\n                <div className=\"h-2 bg-slate-100 rounded-full overflow-hidden\">\n                    <div\n                        className=\"h-full bg-blue-600 rounded-full transition-all duration-500 ease-out\"\n                        style={{ width: `${progress}%` }}\n                    />\n                </div>\n            </div>\n\n            {/* Phase Steps */}\n            <div className=\"space-y-2\">\n                {PHASE_ORDER.map((phase, index) => {\n                    const phaseInfo = CONVERSATION_PHASES[phase]\n                    const isComplete = index < currentIndex\n                    const isCurrent = index === currentIndex\n                    const isPending = index > currentIndex\n\n                    return (\n                        <div\n                            key={phase}\n                            className={cn(\n                                \"flex items-center gap-3 p-2 rounded-lg transition-colors\",\n                                isCurrent && \"bg-blue-50\",\n                                isComplete && \"bg-emerald-50/50\"\n                            )}\n                        >\n                            {/* Icon */}\n                            <div\n                                className={cn(\n                                    \"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0\",\n                                    isComplete && \"bg-emerald-500 text-white\",\n                                    isCurrent && \"bg-blue-600 text-white\",\n                                    isPending && \"bg-slate-200 text-slate-400\"\n                                )}\n                            >\n                                {isComplete ? (\n                                    <CheckCircle2 className=\"w-4 h-4\" />\n                                ) : isCurrent ? (\n                                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                                ) : (\n                                    <Circle className=\"w-3 h-3\" />\n                                )}\n                            </div>\n\n                            {/* Text */}\n                            <div className=\"flex-1 min-w-0\">\n                                <div\n                                    className={cn(\n                                        \"text-sm font-medium truncate\",\n                                        isComplete && \"text-emerald-700\",\n                                        isCurrent && \"text-blue-700\",\n                                        isPending && \"text-slate-400\"\n                                    )}\n                                >\n                                    {phaseInfo.name}\n                                </div>\n                                <div\n                                    className={cn(\n                                        \"text-xs truncate\",\n                                        isComplete && \"text-emerald-600/70\",\n                                        isCurrent && \"text-blue-600/70\",\n                                        isPending && \"text-slate-400\"\n                                    )}\n                                >\n                                    {phaseInfo.description}\n                                </div>\n                            </div>\n\n                            {/* Status */}\n                            {isComplete && (\n                                <span className=\"text-xs font-medium text-emerald-600\">Done</span>\n                            )}\n                            {isCurrent && (\n                                <span className=\"text-xs font-medium text-blue-600\">In Progress</span>\n                            )}\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )\n}\n\n// -----------------------------------------------------------------------------\n// Mini Phase Badge (for header)\n// -----------------------------------------------------------------------------\n\ninterface PhaseBadgeProps {\n    phase: ConversationPhase\n    progress: number\n    className?: string\n}\n\nexport function PhaseBadge({ phase, progress, className }: PhaseBadgeProps) {\n    return (\n        <div\n            className={cn(\n                \"inline-flex items-center gap-2 px-3 py-1.5 rounded-full\",\n                \"bg-blue-50 border border-blue-200\",\n                className\n            )}\n        >\n            <div className=\"w-2 h-2 rounded-full bg-blue-600 animate-pulse\" />\n            <span className=\"text-xs font-medium text-blue-700\">\n                {CONVERSATION_PHASES[phase].name}\n            </span>\n            <span className=\"text-xs text-blue-500\">{Math.round(progress)}%</span>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/notes/notes-panel.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - ENHANCED NOTES PANEL\n// Displays categorized notes with priority indicators\n// =============================================================================\n\nimport { useState, useMemo } from \"react\"\nimport { FileEdit, Trash2, ChevronDown, ChevronRight, Sparkles } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { cn } from \"@/lib/utils\"\nimport {\n  type Note,\n  type NoteCategory,\n  CATEGORY_STYLES,\n  PRIORITY_STYLES,\n  NOTE_CATEGORIES,\n} from \"@/lib/types\"\nimport { PhaseIndicator } from \"@/components/chat/phase-indicator\"\nimport type { ConversationPhase } from \"@/lib/types\"\nimport type { AnalysisResult } from \"@/lib/sop-analyzer\"\nimport type { ImprovementStatus } from \"@/lib/improvement-helpers\"\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\ninterface NotesPanelProps {\n  notes: Note[]\n  onDeleteNote?: (id: string) => void\n  onEditNote?: (note: Note) => void\n  onReview?: () => void\n  progress: number\n  phase: ConversationPhase | string\n  // Improvement mode props\n  isImprovementMode?: boolean\n  analysisResult?: AnalysisResult\n  improvementStatus?: Record<string, ImprovementStatus>\n}\n\n// -----------------------------------------------------------------------------\n// Note Card Component\n// -----------------------------------------------------------------------------\n\nfunction NoteCard({\n  note,\n  onDelete,\n  onEdit,\n}: {\n  note: Note\n  onDelete?: () => void\n  onEdit?: () => void\n}) {\n  const categoryStyle = CATEGORY_STYLES[note.category] || CATEGORY_STYLES.METADATA\n  const priorityStyle = PRIORITY_STYLES[note.priority]\n\n  return (\n    <div className=\"bg-white rounded-lg border border-slate-200 p-3 hover:shadow-sm transition-shadow\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-2 mb-2\">\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <span\n            className={cn(\n              \"px-2 py-0.5 rounded text-xs font-medium\",\n              categoryStyle.bg,\n              categoryStyle.text\n            )}\n          >\n            {categoryStyle.label}\n          </span>\n          <span className={cn(\"text-sm font-bold\", priorityStyle.color)}>\n            {priorityStyle.icon}\n          </span>\n        </div>\n        <span className=\"text-xs text-slate-400 whitespace-nowrap\">\n          {note.timestamp}\n        </span>\n      </div>\n\n      {/* Content */}\n      <p className=\"text-sm text-slate-700 mb-2 line-clamp-3\">{note.content}</p>\n\n      {/* Related To */}\n      {note.relatedTo && (\n        <p className=\"text-xs text-slate-500 mb-2\">\n          <span className=\"font-medium\">â†’</span> {note.relatedTo}\n        </p>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex items-center justify-between pt-2 border-t border-slate-100\">\n        <span className=\"text-xs text-slate-400\">{note.source}</span>\n        <div className=\"flex items-center gap-1\">\n          {onEdit && (\n            <button\n              onClick={onEdit}\n              className=\"p-1 text-slate-400 hover:text-slate-600 transition-colors\"\n              title=\"Edit note\"\n            >\n              <FileEdit className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n          {onDelete && (\n            <button\n              onClick={onDelete}\n              className=\"p-1 text-slate-400 hover:text-red-500 transition-colors\"\n              title=\"Delete note\"\n            >\n              <Trash2 className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Category Group Component\n// -----------------------------------------------------------------------------\n\nfunction CategoryGroup({\n  category,\n  notes,\n  onDeleteNote,\n  onEditNote,\n  defaultExpanded = true,\n}: {\n  category: NoteCategory\n  notes: Note[]\n  onDeleteNote?: (id: string) => void\n  onEditNote?: (note: Note) => void\n  defaultExpanded?: boolean\n}) {\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded)\n  const categoryStyle = CATEGORY_STYLES[category]\n\n  return (\n    <div className=\"space-y-2\">\n      {/* Category Header */}\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        className=\"w-full flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 transition-colors\"\n      >\n        <div className=\"flex items-center gap-2\">\n          {isExpanded ? (\n            <ChevronDown className=\"w-4 h-4 text-slate-400\" />\n          ) : (\n            <ChevronRight className=\"w-4 h-4 text-slate-400\" />\n          )}\n          <span\n            className={cn(\n              \"px-2 py-0.5 rounded text-xs font-medium\",\n              categoryStyle.bg,\n              categoryStyle.text\n            )}\n          >\n            {categoryStyle.label}\n          </span>\n        </div>\n        <span className=\"text-xs text-slate-400\">{notes.length}</span>\n      </button>\n\n      {/* Notes */}\n      {isExpanded && (\n        <div className=\"space-y-2 pl-6\">\n          {notes.map((note) => (\n            <NoteCard\n              key={note.id}\n              note={note}\n              onDelete={onDeleteNote ? () => onDeleteNote(note.id) : undefined}\n              onEdit={onEditNote ? () => onEditNote(note) : undefined}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Analysis Summary Component (for Improvement Mode)\n// -----------------------------------------------------------------------------\n\nfunction AnalysisSummary({\n  analysisResult,\n  improvementStatus,\n}: {\n  analysisResult: AnalysisResult\n  improvementStatus: Record<string, ImprovementStatus>\n}) {\n  const totalImprovements = analysisResult.improvements.length\n  const addressedCount = Object.values(improvementStatus).filter(s => s === 'addressed').length\n  const progressPercent = totalImprovements > 0\n    ? Math.round((addressedCount / totalImprovements) * 100)\n    : 0\n\n  const highPriority = analysisResult.improvements.filter(i => i.priority === 'High')\n  const mediumPriority = analysisResult.improvements.filter(i => i.priority === 'Medium')\n  const lowPriority = analysisResult.improvements.filter(i => i.priority === 'Low')\n\n  const getStatusIcon = (idx: number) => {\n    const status = improvementStatus[`improvement-${idx}`]\n    return status === 'addressed' ? 'âœ…' : 'â³'\n  }\n\n  const getImprovementIndex = (improvement: AnalysisResult['improvements'][0]) => {\n    return analysisResult.improvements.indexOf(improvement)\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg p-4 border border-slate-200\">\n      <h4 className=\"font-semibold text-slate-800 mb-3 flex items-center gap-2\">\n        ðŸ“Š Analysis Summary\n      </h4>\n\n      {/* Score and Progress */}\n      <div className=\"flex gap-3 text-sm mb-3\">\n        <span className=\"px-2 py-1 bg-blue-100 text-blue-700 rounded font-medium\">\n          Quality: {analysisResult.quality.overall}/100\n        </span>\n        <span className=\"px-2 py-1 bg-green-100 text-green-700 rounded font-medium\">\n          Progress: {addressedCount}/{totalImprovements}\n        </span>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"w-full bg-slate-200 rounded-full h-2 mb-4\">\n        <div\n          className=\"bg-green-500 h-2 rounded-full transition-all duration-500\"\n          style={{ width: `${progressPercent}%` }}\n        />\n      </div>\n\n      {/* Priority Sections */}\n      <div className=\"space-y-3\">\n        {highPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-red-600 flex items-center gap-1\">\n              ðŸ”´ HIGH PRIORITY ({highPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {highPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {mediumPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-yellow-600 flex items-center gap-1\">\n              ðŸŸ¡ MEDIUM PRIORITY ({mediumPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {mediumPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {lowPriority.length > 0 && (\n          <div>\n            <span className=\"text-xs font-semibold text-blue-600 flex items-center gap-1\">\n              ðŸ”µ LOW PRIORITY ({lowPriority.length})\n            </span>\n            <ul className=\"mt-1 space-y-1\">\n              {lowPriority.map((imp) => (\n                <li key={getImprovementIndex(imp)} className=\"text-xs text-slate-600 flex items-center gap-2\">\n                  <span>{getStatusIcon(getImprovementIndex(imp))}</span>\n                  <span className=\"truncate\">{imp.description.slice(0, 45)}...</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Main Notes Panel\n// -----------------------------------------------------------------------------\n\nexport function NotesPanel({\n  notes,\n  onDeleteNote,\n  onEditNote,\n  onReview,\n  progress,\n  phase,\n  isImprovementMode = false,\n  analysisResult,\n  improvementStatus = {},\n}: NotesPanelProps) {\n  const [viewMode, setViewMode] = useState<\"grouped\" | \"list\">(\"grouped\")\n\n  // Group notes by category\n  const groupedNotes = useMemo(() => {\n    const groups: Partial<Record<NoteCategory, Note[]>> = {}\n\n    for (const note of notes) {\n      if (!groups[note.category]) {\n        groups[note.category] = []\n      }\n      groups[note.category]!.push(note)\n    }\n\n    return groups\n  }, [notes])\n\n  // Order categories by priority (procedure steps first, etc.)\n  const categoryOrder: NoteCategory[] = [\n    \"HEADER_INFO\",\n    \"PURPOSE_SCOPE\",\n    \"ROLES_RESPONSIBILITIES\",\n    \"PROCEDURE_STEPS\",\n    \"DECISION_POINTS\",\n    \"QUALITY_SUCCESS\",\n    \"TROUBLESHOOTING\",\n    \"MATERIALS_RESOURCES\",\n    \"DEFINITIONS_REFERENCES\",\n    \"VISUAL_AIDS\",\n    \"GAPS_IMPROVEMENTS\",\n    \"METADATA\",\n  ]\n\n  const sortedCategories = categoryOrder.filter(\n    (cat) => groupedNotes[cat] && groupedNotes[cat]!.length > 0\n  )\n\n  // Convert phase string to ConversationPhase type\n  const normalizedPhase = (phase as ConversationPhase) || \"foundation\"\n\n  return (\n    <div className=\"h-full flex flex-col bg-slate-50\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-slate-200 bg-white\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"font-semibold text-slate-900\">Extracted Notes</h3>\n          <span className=\"text-sm text-slate-500\">{notes.length} notes</span>\n        </div>\n\n        {/* Phase Progress */}\n        <PhaseIndicator\n          currentPhase={normalizedPhase}\n          progress={progress}\n          variant=\"compact\"\n        />\n      </div>\n\n      {/* Notes Content - Everything in ScrollArea for proper overflow handling */}\n      <ScrollArea className=\"flex-1 min-h-0\">\n        <div className=\"p-4 space-y-4\">\n          {/* Analysis Summary - Inside scroll area */}\n          {isImprovementMode && analysisResult && (\n            <AnalysisSummary\n              analysisResult={analysisResult}\n              improvementStatus={improvementStatus}\n            />\n          )}\n\n          {/* Notes */}\n          {notes.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <FileEdit className=\"w-6 h-6 text-slate-400\" />\n              </div>\n              <p className=\"text-sm text-slate-500 mb-1\">No notes yet</p>\n              <p className=\"text-xs text-slate-400\">\n                Notes will appear here as you chat with the AI\n              </p>\n            </div>\n          ) : viewMode === \"grouped\" ? (\n            <div className=\"space-y-4\">\n              {sortedCategories.map((category) => (\n                <CategoryGroup\n                  key={category}\n                  category={category}\n                  notes={groupedNotes[category]!}\n                  onDeleteNote={onDeleteNote}\n                  onEditNote={onEditNote}\n                  defaultExpanded={true}\n                />\n              ))}\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {notes.map((note) => (\n                <NoteCard\n                  key={note.id}\n                  note={note}\n                  onDelete={onDeleteNote ? () => onDeleteNote(note.id) : undefined}\n                  onEdit={onEditNote ? () => onEditNote(note) : undefined}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n\n      {/* Footer Actions */}\n      <div className=\"p-4 border-t border-slate-200 bg-white\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <button\n            onClick={() => setViewMode(\"grouped\")}\n            className={cn(\n              \"flex-1 py-1.5 text-xs font-medium rounded transition-colors\",\n              viewMode === \"grouped\"\n                ? \"bg-blue-100 text-blue-700\"\n                : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n            )}\n          >\n            By Category\n          </button>\n          <button\n            onClick={() => setViewMode(\"list\")}\n            className={cn(\n              \"flex-1 py-1.5 text-xs font-medium rounded transition-colors\",\n              viewMode === \"list\"\n                ? \"bg-blue-100 text-blue-700\"\n                : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n            )}\n          >\n            All Notes\n          </button>\n        </div>\n\n        <Button\n          onClick={onReview}\n          disabled={notes.length === 0}\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white gap-2\"\n        >\n          <Sparkles className=\"w-4 h-4\" />\n          Review & Generate SOP\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,8KAAwB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1231, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/layout/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport {\n  LayoutDashboard,\n  FolderOpen,\n  Settings,\n  FileText,\n  LogOut,\n  Plus,\n  ChevronRight,\n  ChevronLeft,\n  X,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\n\nconst menuItems = [\n  { icon: LayoutDashboard, label: \"Dashboard\", href: \"/dashboard\" },\n  { icon: FolderOpen, label: \"Library\", href: \"/library\" },\n  { icon: Settings, label: \"Settings\", href: \"/settings\" },\n]\n\ninterface SidebarProps {\n  isCollapsed: boolean\n  onToggle: () => void\n  isMobileOpen?: boolean\n  onMobileClose?: () => void\n}\n\nexport function Sidebar({ isCollapsed, onToggle, isMobileOpen, onMobileClose }: SidebarProps) {\n  const pathname = usePathname()\n\n  return (\n    <>\n      {/* Mobile Backdrop */}\n      {isMobileOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 md:hidden\"\n          onClick={onMobileClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <aside\n        className={cn(\n          \"fixed left-0 top-0 h-full bg-slate-900 text-slate-300 flex flex-col z-50 transition-all duration-300 ease-in-out\",\n          // Desktop: collapsed or expanded\n          \"hidden md:flex\",\n          isCollapsed ? \"md:w-20\" : \"md:w-64\",\n          // Mobile: overlay mode\n          isMobileOpen && \"!flex w-72\"\n        )}\n      >\n        {/* Header Row: Logo + Name + Toggle */}\n        <div\n          className={cn(\n            \"flex items-center gap-3 py-5 border-b border-slate-800\",\n            isCollapsed && !isMobileOpen ? \"px-4 justify-center\" : \"px-5\"\n          )}\n        >\n          {/* Logo */}\n          <div className=\"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/25 flex-shrink-0\">\n            <FileText className=\"w-5 h-5 text-white\" />\n          </div>\n\n          {/* Name - hidden when collapsed on desktop, always shown on mobile */}\n          {(!isCollapsed || isMobileOpen) && (\n            <span className=\"text-lg font-bold text-white whitespace-nowrap flex-1\">\n              StepWise\n            </span>\n          )}\n\n          {/* Toggle Button (desktop) / Close Button (mobile) */}\n          {isMobileOpen ? (\n            <button\n              onClick={onMobileClose}\n              className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n              title=\"Close sidebar\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          ) : (\n            <button\n              onClick={onToggle}\n              className={cn(\n                \"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\",\n                isCollapsed && \"hidden\"\n              )}\n              title={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n            >\n              <ChevronLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n        </div>\n\n        {/* Expand button when collapsed (desktop only) */}\n        {isCollapsed && !isMobileOpen && (\n          <div className=\"px-3 py-3 border-b border-slate-800\">\n            <button\n              onClick={onToggle}\n              className=\"w-full h-10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n              title=\"Expand sidebar\"\n            >\n              <ChevronRight className=\"w-5 h-5\" />\n            </button>\n          </div>\n        )}\n\n        {/* Quick Create Button */}\n        <div className={cn(\"py-4\", isCollapsed && !isMobileOpen ? \"px-3\" : \"px-4\")}>\n          <Link\n            href=\"/create\"\n            onClick={onMobileClose}\n            className={cn(\n              \"flex items-center justify-center bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white font-medium transition-all duration-200 shadow-lg shadow-blue-600/25 hover:shadow-blue-500/40\",\n              isCollapsed && !isMobileOpen\n                ? \"w-10 h-10 rounded-lg\"\n                : \"w-full px-4 py-3 rounded-xl gap-3\"\n            )}\n            title=\"Create New SOP\"\n          >\n            <Plus className={cn(\"flex-shrink-0\", isCollapsed && !isMobileOpen ? \"w-5 h-5\" : \"w-5 h-5\")} />\n            {(!isCollapsed || isMobileOpen) && <span>New SOP</span>}\n          </Link>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 px-3\">\n          {(!isCollapsed || isMobileOpen) && (\n            <div className=\"text-xs font-medium text-slate-500 uppercase tracking-wider px-3 mb-3\">\n              Menu\n            </div>\n          )}\n          <ul className=\"space-y-1\">\n            {menuItems.map((item) => {\n              const isActive = pathname === item.href || pathname.startsWith(item.href + \"/\")\n              return (\n                <li key={item.href}>\n                  <Link\n                    href={item.href}\n                    onClick={onMobileClose}\n                    className={cn(\n                      \"flex items-center gap-3 rounded-xl transition-all duration-200 group\",\n                      isCollapsed && !isMobileOpen\n                        ? \"justify-center p-2.5\"\n                        : \"px-4 py-2.5\",\n                      // Only show background when expanded OR on hover\n                      isCollapsed && !isMobileOpen\n                        ? isActive\n                          ? \"text-white\"\n                          : \"text-slate-400 hover:text-white\"\n                        : isActive\n                          ? \"bg-slate-800 text-white shadow-md\"\n                          : \"hover:bg-slate-800/50 hover:text-white\"\n                    )}\n                    title={isCollapsed && !isMobileOpen ? item.label : undefined}\n                  >\n                    <item.icon\n                      className={cn(\n                        \"w-5 h-5 flex-shrink-0 transition-colors duration-200\",\n                        isActive ? \"text-blue-400\" : \"text-slate-400 group-hover:text-slate-300\"\n                      )}\n                    />\n                    {(!isCollapsed || isMobileOpen) && (\n                      <>\n                        <span className=\"flex-1\">{item.label}</span>\n                        {isActive && <ChevronRight className=\"w-4 h-4 text-slate-500\" />}\n                      </>\n                    )}\n                  </Link>\n                </li>\n              )\n            })}\n          </ul>\n        </nav>\n\n        {/* User Section */}\n        <div className=\"border-t border-slate-800 p-4\">\n          <div\n            className={cn(\n              \"flex items-center gap-3 rounded-xl hover:bg-slate-800/50 transition-colors cursor-pointer\",\n              isCollapsed && !isMobileOpen ? \"justify-center p-2\" : \"px-2 py-2\"\n            )}\n            title={isCollapsed && !isMobileOpen ? \"John Doe\" : undefined}\n          >\n            <Avatar className=\"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 flex-shrink-0 shadow-lg shadow-blue-500/25\">\n              <AvatarFallback className=\"bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-sm font-medium\">\n                JD\n              </AvatarFallback>\n            </Avatar>\n            {(!isCollapsed || isMobileOpen) && (\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-white truncate\">John Doe</p>\n                <p className=\"text-xs text-slate-500 truncate\">john@company.com</p>\n              </div>\n            )}\n          </div>\n          <button\n            className={cn(\n              \"flex items-center gap-3 w-full mt-2 text-sm text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-xl transition-colors\",\n              isCollapsed && !isMobileOpen ? \"justify-center p-3\" : \"px-4 py-2.5\"\n            )}\n            title={isCollapsed && !isMobileOpen ? \"Sign out\" : undefined}\n          >\n            <LogOut className=\"w-4 h-4 flex-shrink-0\" />\n            {(!isCollapsed || isMobileOpen) && <span>Sign out</span>}\n          </button>\n        </div>\n      </aside>\n    </>\n  )\n}\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1576, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/components/layout/dashboard-layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { Sidebar } from \"@/components/layout/sidebar\"\nimport { cn } from \"@/lib/utils\"\nimport { Menu, FileText } from \"lucide-react\"\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode\n  fullHeight?: boolean\n}\n\nexport function DashboardLayout({ children, fullHeight = false }: DashboardLayoutProps) {\n  const [isCollapsed, setIsCollapsed] = useState(false)\n  const [isMobile, setIsMobile] = useState(false)\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const mobile = window.innerWidth < 768\n      setIsMobile(mobile)\n\n      // Auto-collapse on tablet screens (768-1024px)\n      if (window.innerWidth >= 768 && window.innerWidth < 1024) {\n        setIsCollapsed(true)\n      }\n\n      // Close mobile menu when resizing to desktop\n      if (!mobile) {\n        setIsMobileMenuOpen(false)\n      }\n    }\n\n    // Check on mount\n    checkScreenSize()\n\n    // Listen for resize\n    window.addEventListener(\"resize\", checkScreenSize)\n    return () => window.removeEventListener(\"resize\", checkScreenSize)\n  }, [])\n\n  const toggleSidebar = () => {\n    setIsCollapsed((prev) => !prev)\n  }\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen((prev) => !prev)\n  }\n\n  const closeMobileMenu = () => {\n    setIsMobileMenuOpen(false)\n  }\n\n  return (\n    <div className={cn(\n      \"bg-gradient-to-br from-slate-50 via-slate-100 to-blue-50/30\",\n      fullHeight ? \"h-screen overflow-hidden\" : \"min-h-screen\"\n    )}>\n      {/* Mobile Top Navbar */}\n      <header className=\"fixed top-0 left-0 right-0 h-16 bg-slate-900 text-white flex items-center justify-between px-4 z-30 md:hidden\">\n        <button\n          onClick={toggleMobileMenu}\n          className=\"w-10 h-10 flex items-center justify-center text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n          aria-label=\"Toggle menu\"\n        >\n          <Menu className=\"w-6 h-6\" />\n        </button>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\">\n            <FileText className=\"w-4 h-4 text-white\" />\n          </div>\n          <span className=\"text-lg font-bold\">StepWise</span>\n        </div>\n\n        {/* Spacer for symmetry */}\n        <div className=\"w-10\" />\n      </header>\n\n      <Sidebar\n        isCollapsed={isCollapsed}\n        onToggle={toggleSidebar}\n        isMobileOpen={isMobileMenuOpen}\n        onMobileClose={closeMobileMenu}\n      />\n\n      <main\n        className={cn(\n          \"transition-all duration-300 ease-in-out\",\n          fullHeight ? \"h-screen overflow-hidden\" : \"min-h-screen\",\n          // Mobile: add top padding for navbar, no side margin\n          isMobile ? \"pt-16 ml-0\" : isCollapsed ? \"ml-20\" : \"ml-64\"\n        )}\n      >\n        {children}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AAAA;AANA;;;;;;AAaO,SAAS,gBAAgB,EAAE,QAAQ,EAAE,aAAa,KAAK,EAAwB;IACpF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IAEzD,IAAA,kNAAS,EAAC;QACR,MAAM,kBAAkB;YACtB,MAAM,SAAS,OAAO,UAAU,GAAG;YACnC,YAAY;YAEZ,+CAA+C;YAC/C,IAAI,OAAO,UAAU,IAAI,OAAO,OAAO,UAAU,GAAG,MAAM;gBACxD,eAAe;YACjB;YAEA,6CAA6C;YAC7C,IAAI,CAAC,QAAQ;gBACX,oBAAoB;YACtB;QACF;QAEA,iBAAiB;QACjB;QAEA,oBAAoB;QACpB,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,eAAe,CAAC,OAAS,CAAC;IAC5B;IAEA,MAAM,mBAAmB;QACvB,oBAAoB,CAAC,OAAS,CAAC;IACjC;IAEA,MAAM,kBAAkB;QACtB,oBAAoB;IACtB;IAEA,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAChB,+DACA,aAAa,6BAA6B;;0BAG1C,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;kCAGlB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,0NAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,8OAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;kCAItC,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,8OAAC,2IAAO;gBACN,aAAa;gBACb,UAAU;gBACV,cAAc;gBACd,eAAe;;;;;;0BAGjB,8OAAC;gBACC,WAAW,IAAA,kHAAE,EACX,2CACA,aAAa,6BAA6B,gBAC1C,qDAAqD;gBACrD,WAAW,eAAe,cAAc,UAAU;0BAGnD;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/lib/improvement-helpers.ts"],"sourcesContent":["// =============================================================================\n// STEPWISE - IMPROVEMENT MODE HELPERS\n// Utilities for context-aware SOP improvement conversations\n// =============================================================================\n\nimport type { AnalysisResult } from \"./sop-analyzer\"\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\nexport type ImprovementStatus = 'pending' | 'in-progress' | 'addressed'\n\nexport interface ImprovementProgress {\n    total: number\n    addressed: number\n    pending: number\n    percentComplete: number\n}\n\n// -----------------------------------------------------------------------------\n// Greeting Generation\n// -----------------------------------------------------------------------------\n\n/**\n * Generates a context-aware greeting for improvement mode\n * References the analysis results and starts with the highest priority issue\n */\nexport function generateImprovementGreeting(analysis: AnalysisResult): string {\n    const { high, medium, low } = categorizeImprovementsByPriority(analysis)\n    const firstIssue = high[0] || medium[0] || low[0]\n\n    let greeting = buildGreetingHeader(analysis, high.length, medium.length, low.length)\n\n    if (firstIssue) {\n        greeting += buildFirstIssueSection(firstIssue)\n    }\n\n    return greeting\n}\n\nfunction buildGreetingHeader(\n    analysis: AnalysisResult,\n    highCount: number,\n    mediumCount: number,\n    lowCount: number\n): string {\n    let header = `I've analyzed your SOP and identified **${analysis.improvements.length} areas for improvement**.\n\nðŸ“Š **Current Quality Score:** ${analysis.quality.overall}/100\nðŸ“‹ **Completeness:** ${analysis.structure.completenessScore}%\n`\n\n    if (highCount > 0) {\n        header += `\\nðŸ”´ **HIGH Priority:** ${highCount} issue${highCount > 1 ? 's' : ''}`\n    }\n    if (mediumCount > 0) {\n        header += `\\nðŸŸ¡ **MEDIUM Priority:** ${mediumCount} issue${mediumCount > 1 ? 's' : ''}`\n    }\n    if (lowCount > 0) {\n        header += `\\nðŸ”µ **LOW Priority:** ${lowCount} issue${lowCount > 1 ? 's' : ''}`\n    }\n\n    header += `\\n\\nLet's address these one by one, starting with the highest priority.`\n\n    return header\n}\n\nfunction buildFirstIssueSection(issue: AnalysisResult['improvements'][0]): string {\n    let section = `\n\n---\n\nðŸ“‹ **Addressing: ${issue.description}** (${issue.priority.toUpperCase()})\n\n${issue.suggestion}\n\nLet me ask you some questions to help fill this gap:`\n\n    // Add specific questions based on issue type\n    section += getQuestionsForIssue(issue)\n\n    return section\n}\n\nfunction getQuestionsForIssue(issue: AnalysisResult['improvements'][0]): string {\n    const desc = issue.description.toLowerCase()\n\n    if (desc.includes(\"role\") || desc.includes(\"responsibilit\")) {\n        return `\n\n1. Who is the primary person/role responsible for this process?\n2. Who reviews or approves the work?\n3. Who should be contacted if there's an issue?`\n    }\n\n    if (desc.includes(\"revision\") || desc.includes(\"version\") || desc.includes(\"history\")) {\n        return `\n\n1. What version number should this SOP be?\n2. When was the last significant update made?\n3. Who typically makes updates to this document?`\n    }\n\n    if (desc.includes(\"troubleshoot\") || desc.includes(\"error\") || desc.includes(\"issue\")) {\n        return `\n\n1. What are the most common problems users face with this process?\n2. What should someone do if they encounter an error?\n3. Who should they contact for help?`\n    }\n\n    if (desc.includes(\"reference\") || desc.includes(\"document\") || desc.includes(\"related\")) {\n        return `\n\n1. Are there any related documents or policies this SOP references?\n2. Are there external standards or regulations this follows?`\n    }\n\n    return `\n\nCan you provide more details about: ${issue.description.toLowerCase()}?`\n}\n\n// -----------------------------------------------------------------------------\n// Progress Tracking\n// -----------------------------------------------------------------------------\n\n/**\n * Calculates improvement progress based on status map\n */\nexport function calculateImprovementProgress(\n    totalImprovements: number,\n    statusMap: Record<string, ImprovementStatus>\n): ImprovementProgress {\n    const addressed = Object.values(statusMap).filter(s => s === 'addressed').length\n    const pending = totalImprovements - addressed\n\n    return {\n        total: totalImprovements,\n        addressed,\n        pending,\n        percentComplete: totalImprovements > 0\n            ? Math.round((addressed / totalImprovements) * 100)\n            : 0\n    }\n}\n\n/**\n * Initializes improvement status tracking from analysis\n */\nexport function initializeImprovementStatus(\n    analysis: AnalysisResult\n): Record<string, ImprovementStatus> {\n    const status: Record<string, ImprovementStatus> = {}\n\n    analysis.improvements.forEach((_, idx) => {\n        status[`improvement-${idx}`] = 'pending'\n    })\n\n    return status\n}\n\n/**\n * Categorizes improvements by priority level\n */\nexport function categorizeImprovementsByPriority(analysis: AnalysisResult) {\n    return {\n        high: analysis.improvements.filter(i => i.priority === \"High\"),\n        medium: analysis.improvements.filter(i => i.priority === \"Medium\"),\n        low: analysis.improvements.filter(i => i.priority === \"Low\")\n    }\n}\n\n// -----------------------------------------------------------------------------\n// Score Estimation\n// -----------------------------------------------------------------------------\n\n/**\n * Estimates improved score based on addressed issues\n */\nexport function calculateEstimatedScore(\n    originalScore: number,\n    analysis: AnalysisResult,\n    statusMap: Record<string, ImprovementStatus>\n): number {\n    let bonus = 0\n\n    analysis.improvements.forEach((imp, idx) => {\n        if (statusMap[`improvement-${idx}`] === 'addressed') {\n            switch (imp.priority) {\n                case 'High': bonus += 6; break\n                case 'Medium': bonus += 4; break\n                case 'Low': bonus += 2; break\n            }\n        }\n    })\n\n    return Math.min(100, originalScore + bonus)\n}\n\n// -----------------------------------------------------------------------------\n// Completion Detection\n// -----------------------------------------------------------------------------\n\n/**\n * Checks if all improvements have been addressed\n */\nexport function areAllImprovementsAddressed(\n    statusMap: Record<string, ImprovementStatus>\n): boolean {\n    const statuses = Object.values(statusMap)\n    return statuses.length > 0 && statuses.every(s => s === 'addressed')\n}\n\n/**\n * Generates completion message when all improvements are done\n */\nexport function generateCompletionMessage(\n    originalScore: number,\n    estimatedScore: number,\n    totalImprovements: number\n): string {\n    return `ðŸŽ‰ **Excellent! We've addressed all ${totalImprovements} improvements!**\n\nðŸ“Š **Quality Score:** ${originalScore}/100 â†’ **${estimatedScore}/100**\n\nYour SOP is now significantly more complete and professional.\n\nWould you like to:\n1. **Review all the changes** before generating\n2. **Make additional edits** to any section\n3. **Generate the improved SOP** now`\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1877, "column": 0}, "map": {"version":3,"sources":["file:///home/hembi/Desktop/sop-builder-mvp/app/create/page.tsx"],"sourcesContent":["\"use client\"\n\n// =============================================================================\n// STEPWISE - CREATE SOP PAGE\n// Main interface for AI-powered SOP creation with 5-phase conversation flow\n// =============================================================================\n\nimport { useState, useRef, useEffect, useCallback, useMemo, Suspense } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter, useSearchParams } from \"next/navigation\"\nimport { experimental_useObject as useObject } from \"@ai-sdk/react\"\nimport { ArrowLeft, Save, FileEdit, MessageSquare, Bot, User, Send, PanelRightClose, PanelRightOpen } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { NotesPanel } from \"@/components/notes/notes-panel\"\nimport { PhaseBadge } from \"@/components/chat/phase-indicator\"\nimport { DashboardLayout } from \"@/components/layout/dashboard-layout\"\nimport { useSOPContext } from \"@/lib/sop-context\"\nimport { aiResponseSchema } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\nimport type { Note, ConversationPhase, SOP, ChatMessage, AIResponse } from \"@/lib/types\"\nimport { generateId } from \"@/lib/types\"\nimport {\n  generateImprovementGreeting,\n  initializeImprovementStatus,\n  type ImprovementStatus\n} from \"@/lib/improvement-helpers\"\nimport type { AnalysisResult } from \"@/lib/sop-analyzer\"\n\n// -----------------------------------------------------------------------------\n// Initial Greeting Message\n// -----------------------------------------------------------------------------\n\nconst INITIAL_GREETING =\n  \"Hello! I'm here to help you create a professional SOP. Let's start with the basics.\\n\\nWhat process or procedure would you like to document today?\"\n\n// -----------------------------------------------------------------------------\n// Message Bubble Component\n// -----------------------------------------------------------------------------\n\ninterface MessageBubbleProps {\n  role: \"user\" | \"assistant\"\n  content: string\n}\n\nfunction MessageBubble({ role, content }: MessageBubbleProps) {\n  const isAI = role === \"assistant\"\n\n  return (\n    <div className={cn(\"flex gap-3 mb-4\", isAI ? \"justify-start\" : \"justify-end\")}>\n      {isAI && (\n        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\n          <Bot className=\"w-4 h-4 text-white\" />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"max-w-[85%] sm:max-w-[80%] px-3 sm:px-4 py-2.5 sm:py-3 rounded-2xl\",\n          isAI ? \"bg-gray-100 text-gray-900 rounded-tl-sm\" : \"bg-blue-600 text-white rounded-tr-sm\"\n        )}\n      >\n        <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{content}</p>\n      </div>\n      {!isAI && (\n        <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0\">\n          <User className=\"w-4 h-4 text-gray-600\" />\n        </div>\n      )}\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Typing Indicator Component\n// -----------------------------------------------------------------------------\n\nfunction TypingIndicator() {\n  return (\n    <div className=\"flex gap-3 mb-4 justify-start\">\n      <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\n        <Bot className=\"w-4 h-4 text-white\" />\n      </div>\n      <div className=\"bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3\">\n        <div className=\"flex gap-1\">\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n          <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Main Component\n// -----------------------------------------------------------------------------\n\nfunction CreateSOPPageContent() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const mode = searchParams.get('mode') ?? 'create'\n  const isImprovementMode = mode === 'improve'\n\n  const { addSOP, session, startNewSession, addSessionNotes, setSessionPhase } = useSOPContext()\n\n  // Local state\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([])\n  const [notes, setNotes] = useState<Note[]>([])\n  const [currentPhase, setCurrentPhase] = useState<ConversationPhase>(\"foundation\")\n  const [progress, setProgress] = useState(0)\n  const [activeTab, setActiveTab] = useState<\"chat\" | \"notes\">(\"chat\")\n  const [inputValue, setInputValue] = useState(\"\")\n  const [isNotesCollapsed, setIsNotesCollapsed] = useState(false)\n  const [improvementStatus, setImprovementStatus] = useState<Record<string, ImprovementStatus>>({})\n  const [initialMessageShown, setInitialMessageShown] = useState(false)\n\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Initialize session on mount\n  useEffect(() => {\n    if (!session && !isImprovementMode) {\n      startNewSession()\n    }\n\n    // For improvement mode, load session data\n    if (session && isImprovementMode && !initialMessageShown) {\n      setNotes(session.notes)\n      if (session.messages.length > 0) {\n        setChatHistory(session.messages)\n      }\n      setCurrentPhase(session.phase)\n\n      // Initialize improvement status tracking\n      if (session.metadata?.analysisResult) {\n        const status = initializeImprovementStatus(session.metadata.analysisResult)\n        setImprovementStatus(status)\n      }\n\n      setInitialMessageShown(true)\n    }\n  }, [session, isImprovementMode, startNewSession, initialMessageShown])\n\n  // -------------------------------------------------------------------------\n  // Object Streaming Hook\n  // -------------------------------------------------------------------------\n\n  const { object, submit, isLoading } = useObject({\n    api: \"/api/chat/sop\",\n    schema: aiResponseSchema,\n    onFinish: ({ object }) => {\n      if (!object) return\n\n      // Add assistant message to history\n      const aiMessage: ChatMessage = {\n        id: generateId(\"msg\"),\n        role: \"ai\",\n        content: object.message || \"\",\n        timestamp: new Date().toISOString(),\n      }\n      setChatHistory((prev) => [...prev, aiMessage])\n\n      // Extract and add notes\n      if (object.notes && object.notes.length > 0) {\n        const newNotes: Note[] = object.notes.map((n) => ({\n          id: generateId(\"note\"),\n          category: n.category as any,\n          priority: n.priority,\n          timestamp: new Date().toISOString(),\n          source: \"AI Extraction\",\n          content: n.content,\n          relatedTo: n.relatedTo,\n          action: n.action,\n        }))\n        setNotes((prev) => [...prev, ...newNotes])\n        addSessionNotes(newNotes)\n      }\n\n      // Update phase and progress\n      if (object.phase) {\n        setCurrentPhase(object.phase as ConversationPhase)\n        setSessionPhase(object.phase as ConversationPhase, object.progress || 0)\n      }\n\n      if (typeof object.progress === \"number\") {\n        setProgress(object.progress)\n      }\n    },\n  })\n\n  // -------------------------------------------------------------------------\n  // Scroll to Bottom\n  // -------------------------------------------------------------------------\n\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }, [])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [chatHistory, object, isLoading, scrollToBottom])\n\n  // -------------------------------------------------------------------------\n  // Message Sending\n  // -------------------------------------------------------------------------\n\n  // Dynamic initial greeting based on mode\n  const initialGreeting = useMemo(() => {\n    if (isImprovementMode && session?.metadata?.analysisResult) {\n      return generateImprovementGreeting(session.metadata.analysisResult)\n    }\n    return INITIAL_GREETING\n  }, [isImprovementMode, session])\n\n  const handleSendMessage = useCallback(() => {\n    if (!inputValue.trim() || isLoading) return\n\n    const userMessage: ChatMessage = {\n      id: generateId(\"msg\"),\n      role: \"user\",\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString(),\n    }\n\n    const newHistory = [...chatHistory, userMessage]\n    setChatHistory(newHistory)\n    setInputValue(\"\")\n\n    // Use current mode and messages for the request\n    submit({\n      messages: newHistory,\n      mode: mode,\n      // Pass analysis context for improvement mode\n      ...(isImprovementMode && session?.metadata?.analysisResult && {\n        analysisContext: session.metadata.analysisResult\n      })\n    })\n  }, [inputValue, isLoading, chatHistory, submit, mode, isImprovementMode, session])\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault()\n        handleSendMessage()\n      }\n    },\n    [handleSendMessage]\n  )\n\n  // -------------------------------------------------------------------------\n  // Actions\n  // -------------------------------------------------------------------------\n\n  const handleSaveDraft = useCallback(() => {\n    const newSOP: SOP = {\n      id: `sop-${Date.now()}`,\n      title: \"New SOP Draft\",\n      department: \"General\",\n      status: \"draft\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      content: \"\",\n      notes,\n      chatHistory,\n    }\n    addSOP(newSOP)\n    router.push(\"/dashboard\")\n  }, [notes, chatHistory, addSOP, router])\n\n  const handleReview = useCallback(() => {\n    const sopId = `sop-${Date.now()}`\n    const newSOP: SOP = {\n      id: sopId,\n      title: \"New SOP\",\n      department: \"General\",\n      status: \"draft\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      content: \"\",\n      notes,\n      chatHistory,\n    }\n    addSOP(newSOP)\n    router.push(`/review/${sopId}`)\n  }, [notes, chatHistory, addSOP, router])\n\n  const handleDeleteNote = useCallback((id: string) => {\n    setNotes((prev) => prev.filter((n) => n.id !== id))\n  }, [])\n\n  // Track improvement status when notes are added\n  useEffect(() => {\n    if (isImprovementMode && session?.metadata?.analysisResult) {\n      const analysis = session.metadata.analysisResult\n      const newStatus = { ...improvementStatus }\n\n      analysis.improvements.forEach((imp: AnalysisResult['improvements'][0], idx: number) => {\n        // Check if notes relate to this improvement\n        const isAddressed = notes.some(note => {\n          const noteContent = note.content.toLowerCase()\n          const impDesc = imp.description.toLowerCase()\n          const impCategory = imp.category.toLowerCase()\n\n          return (\n            noteContent.includes(impDesc.slice(0, 30)) ||\n            note.relatedTo?.toLowerCase().includes(impCategory) ||\n            (note.category === 'GAPS_IMPROVEMENTS' && noteContent.includes(impDesc.slice(0, 20)))\n          )\n        })\n\n        if (isAddressed && newStatus[`improvement-${idx}`] !== 'addressed') {\n          newStatus[`improvement-${idx}`] = 'addressed'\n        }\n      })\n\n      setImprovementStatus(newStatus)\n    }\n  }, [notes, isImprovementMode, session])\n\n  // -------------------------------------------------------------------------\n  // Render\n  // -------------------------------------------------------------------------\n\n  return (\n    <DashboardLayout fullHeight>\n      <div className=\"h-full flex flex-col\">\n        {/* Header */}\n        <header className=\"bg-white border-b border-slate-200 px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between flex-shrink-0\">\n          <div className=\"flex items-center gap-4\">\n            <Link\n              href=\"/dashboard\"\n              className=\"text-slate-500 hover:text-slate-700 flex items-center gap-2 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              <span className=\"hidden sm:inline\">Back to Dashboard</span>\n            </Link>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-lg font-semibold text-slate-900 hidden sm:block\">Creating New SOP</h1>\n            <PhaseBadge phase={currentPhase} progress={progress} />\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            {/* Notes Panel Toggle - Desktop only */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setIsNotesCollapsed(!isNotesCollapsed)}\n              className=\"hidden lg:flex\"\n              title={isNotesCollapsed ? \"Show Notes Panel\" : \"Hide Notes Panel\"}\n            >\n              {isNotesCollapsed ? (\n                <PanelRightOpen className=\"w-5 h-5\" />\n              ) : (\n                <PanelRightClose className=\"w-5 h-5\" />\n              )}\n            </Button>\n            <Button variant=\"outline\" onClick={handleSaveDraft} className=\"gap-2 bg-white\">\n              <Save className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Save Draft</span>\n            </Button>\n          </div>\n        </header>\n\n        {/* Mobile Tab Navigation */}\n        <div className=\"lg:hidden flex border-b border-slate-200 bg-white flex-shrink-0\">\n          <button\n            onClick={() => setActiveTab(\"chat\")}\n            className={cn(\n              \"flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors\",\n              activeTab === \"chat\"\n                ? \"text-blue-600 border-b-2 border-blue-600\"\n                : \"text-slate-500 hover:text-slate-700\"\n            )}\n          >\n            <MessageSquare className=\"w-4 h-4\" />\n            Chat\n          </button>\n          <button\n            onClick={() => setActiveTab(\"notes\")}\n            className={cn(\n              \"flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors\",\n              activeTab === \"notes\"\n                ? \"text-blue-600 border-b-2 border-blue-600\"\n                : \"text-slate-500 hover:text-slate-700\"\n            )}\n          >\n            <FileEdit className=\"w-4 h-4\" />\n            Notes ({notes.length})\n          </button>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex overflow-hidden\">\n          {/* Chat Area */}\n          <div\n            className={cn(\n              \"flex-1 flex flex-col bg-white\",\n              activeTab === \"notes\" ? \"hidden lg:flex\" : \"flex\",\n              !isNotesCollapsed && \"lg:border-r border-slate-200\"\n            )}\n          >\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\n              {/* Initial greeting */}\n              <MessageBubble role=\"assistant\" content={initialGreeting} />\n\n              {/* Chat history */}\n              {chatHistory.map((message) => (\n                <MessageBubble\n                  key={message.id}\n                  role={message.role === \"ai\" ? \"assistant\" : \"user\"}\n                  content={message.content}\n                />\n              ))}\n\n              {/* Current streaming message */}\n              {isLoading && object && object.message && (\n                <MessageBubble role=\"assistant\" content={object.message} />\n              )}\n\n              {/* Loading indicator */}\n              {isLoading && !object?.message && <TypingIndicator />}\n\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input */}\n            <div className=\"border-t border-gray-200 bg-white p-3 sm:p-4 flex-shrink-0\">\n              <div className=\"flex gap-2 sm:gap-3 items-end\">\n                <textarea\n                  value={inputValue}\n                  onChange={(e) => setInputValue(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"Type your response here...\"\n                  disabled={isLoading}\n                  className=\"flex-1 resize-none border border-gray-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 min-h-[48px] max-h-[120px]\"\n                  rows={1}\n                />\n                <Button\n                  onClick={handleSendMessage}\n                  disabled={!inputValue.trim() || isLoading}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white h-12 w-12 rounded-xl p-0\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Notes Panel - Desktop */}\n          <div\n            className={cn(\n              \"hidden lg:flex flex-col transition-all duration-300\",\n              isNotesCollapsed ? \"w-0 overflow-hidden\" : \"w-96\"\n            )}\n          >\n            <NotesPanel\n              notes={notes}\n              onDeleteNote={handleDeleteNote}\n              onReview={handleReview}\n              progress={progress}\n              phase={currentPhase}\n              isImprovementMode={isImprovementMode}\n              analysisResult={session?.metadata?.analysisResult}\n              improvementStatus={improvementStatus}\n            />\n          </div>\n\n          {/* Notes Panel - Mobile */}\n          <div className={cn(\"flex-1 lg:hidden\", activeTab === \"chat\" ? \"hidden\" : \"flex flex-col\")}>\n            <NotesPanel\n              notes={notes}\n              onDeleteNote={handleDeleteNote}\n              onReview={handleReview}\n              progress={progress}\n              phase={currentPhase}\n              isImprovementMode={isImprovementMode}\n              analysisResult={session?.metadata?.analysisResult}\n              improvementStatus={improvementStatus}\n            />\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n\nexport default function CreateSOPPage() {\n  return (\n    <Suspense fallback={\n      <DashboardLayout fullHeight>\n        <div className=\"h-full flex items-center justify-center\">\n          <div className=\"text-slate-500\">Loading...</div>\n        </div>\n      </DashboardLayout>\n    }>\n      <CreateSOPPageContent />\n    </Suspense>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}